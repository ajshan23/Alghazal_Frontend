import{ag as W,B as z,a8 as H,v as V,r as h,j as e}from"./index-cbxZr22l.js";import{e as $,f as G,g as K}from"./api-VPAlbvIl.js";import"./Alert-CSp5bS7v.js";import{A as S}from"./index-5KOQOspk.js";import"./Badge-DfD0Ukso.js";import{B as J}from"./Button-FHJPdulA.js";import"./index-CpMcTudo.js";import{C as D}from"./Card-RZl4E4-O.js";import{C as Q}from"./index-CX5Y9eeL.js";import"./Dialog-OmmgehMy.js";import"./Drawer-Dn9ylrlH.js";import"./index-BM7LESIb.js";import"./FormItem-Dsb0hqaN.js";import"./useUniqueId-uw_CuIVG.js";import"./Input-CoANB9Wy.js";import"./Upload-DyKyTg7Q.js";import"./index-BLEb6Y8m.js";import{t as A,N as P}from"./toast-BCRt4NsN.js";import"./index-B6FuZSSV.js";import"./ScrollBar-B_8Ws9P0.js";import"./Select-DnpJ3Vfh.js";import"./Tag-DRJajbyJ.js";import{a0 as X,b3 as L,a7 as E,b4 as q}from"./index-DGePi-hy.js";import"./StatusIcon-CfTAV1XC.js";import"./CloseButton-BgX1UjTO.js";import"./proxy-CCW0hh_w.js";import"./floating-ui.react-CXyQfini.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-pMPtRiQM.js";import"./context-Ci1lPV1_.js";import"./Views-B4cM7RDw.js";import"./_getPrototype-DErBkxwa.js";import"./index-DdVDk-x0.js";import"./index-BUmdAIPo.js";import"./toString-DDHIFlh6.js";import"./chainedFunction-BxZSneMW.js";import"./index-C8fXiORa.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-85N_kEkV.js";var c={},w={},I;function Y(){if(I)return w;I=1,Object.defineProperty(w,"__esModule",{value:!0}),w.parseLengthAndUnit=x,w.cssValue=p;var u={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function x(m){if(typeof m=="number")return{value:m,unit:"px"};var n,f=(m.match(/^[0-9.]*/)||"").toString();f.includes(".")?n=parseFloat(f):n=parseInt(f,10);var d=(m.match(/[^0-9]*$/)||"").toString();return u[d]?{value:n,unit:d}:(console.warn("React Spinners: ".concat(m," is not a valid css value. Defaulting to ").concat(n,"px.")),{value:n,unit:"px"})}function p(m){var n=x(m);return"".concat(n.value).concat(n.unit)}return w}var _={},B;function Z(){if(B)return _;B=1,Object.defineProperty(_,"__esModule",{value:!0}),_.createAnimation=void 0;var u=function(x,p,m){var n="react-spinners-".concat(x,"-").concat(m);if(typeof window>"u"||!window.document)return n;var f=document.createElement("style");document.head.appendChild(f);var d=f.sheet,b=`
    @keyframes `.concat(n,` {
      `).concat(p,`
    }
  `);return d&&d.insertRule(b,0),n};return _.createAnimation=u,_}var F;function ee(){if(F)return c;F=1;var u=c&&c.__assign||function(){return u=Object.assign||function(i){for(var a,o=1,t=arguments.length;o<t;o++){a=arguments[o];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},u.apply(this,arguments)},x=c&&c.__createBinding||(Object.create?function(i,a,o,t){t===void 0&&(t=o);var s=Object.getOwnPropertyDescriptor(a,o);(!s||("get"in s?!a.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,t,s)}:function(i,a,o,t){t===void 0&&(t=o),i[t]=a[o]}),p=c&&c.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),m=c&&c.__importStar||function(){var i=function(a){return i=Object.getOwnPropertyNames||function(o){var t=[];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[t.length]=s);return t},i(a)};return function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var t=i(a),s=0;s<t.length;s++)t[s]!=="default"&&x(o,a,t[s]);return p(o,a),o}}(),n=c&&c.__rest||function(i,a){var o={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&a.indexOf(t)<0&&(o[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(i);s<t.length;s++)a.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(i,t[s])&&(o[t[s]]=i[t[s]]);return o};Object.defineProperty(c,"__esModule",{value:!0});var f=m(W()),d=Y(),b=Z(),l=(0,b.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function M(i){var a=i.loading,o=a===void 0?!0:a,t=i.color,s=t===void 0?"#000000":t,y=i.speedMultiplier,C=y===void 0?1:y,j=i.cssOverride,O=j===void 0?{}:j,N=i.size,k=N===void 0?35:N,r=n(i,["loading","color","speedMultiplier","cssOverride","size"]),g=u({background:"transparent !important",width:(0,d.cssValue)(k),height:(0,d.cssValue)(k),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(l," ").concat(.75/C,"s 0s infinite linear"),animationFillMode:"both"},O);return o?f.createElement("span",u({style:g},r)):null}return c.default=M,c}var re=ee();const te=z(re),ze=()=>{var y,C,j,O,N,k;const{projectId:u}=H(),x=V(),[p,m]=h.useState([]),[n,f]=h.useState([]),[d,b]=h.useState([]),[l,M]=h.useState(""),[i,a]=h.useState(!0),[o,t]=h.useState(!1);h.useEffect(()=>{(async()=>{var g,v,T;try{a(!0);const[R,U]=await Promise.all([$(),G()]);m(((g=R.data.data)==null?void 0:g.workers)||[]),f(((T=(v=U.data)==null?void 0:v.data)==null?void 0:T.drivers)||[])}catch(R){console.error("Error fetching team members:",R),A.push(e.jsx(P,{title:"Error",type:"danger",children:"Failed to load team members"}))}finally{a(!1)}})()},[]);const s=async()=>{if(d.length===0||!l){A.push(e.jsx(P,{title:"Warning",type:"warning",children:"Please select at least one worker and a driver"}));return}try{t(!0),await K(u,{workers:d,driverId:l}),A.push(e.jsx(P,{title:"Success",type:"success",children:"Team assigned successfully"})),x(`/app/project-view/${u}`)}catch(r){console.error("Error assigning team:",r),A.push(e.jsx(P,{title:"Error",type:"danger",children:"Failed to assign team"}))}finally{t(!1)}};return i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900 flex items-center justify-center",children:e.jsx(te,{color:"#4f46e5",size:50})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg",children:e.jsx(X,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Assign Team"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Select workers and driver for this project"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs(D,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(L,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Select Workers"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[p.map(r=>e.jsxs("div",{className:`flex items-center p-4 rounded-xl border transition-all duration-200 cursor-pointer ${d.includes(r._id)?"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border-indigo-200 dark:border-indigo-800 shadow-sm":"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 border-gray-200 dark:border-gray-600 hover:shadow-md"}`,onClick:()=>{b(g=>g.includes(r._id)?g.filter(v=>v!==r._id):[...g,r._id])},children:[e.jsx(Q,{checked:d.includes(r._id),onChange:()=>{},className:"mr-3"}),e.jsx(S,{src:r.profileImage,size:40,className:"ring-2 ring-white dark:ring-gray-800"}),e.jsxs("span",{className:"ml-3 dark:text-gray-200 font-medium",children:[r.firstName," ",r.lastName]}),d.includes(r._id)&&e.jsx(E,{className:"ml-auto text-green-500 text-xl"})]},r._id)),p.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(L,{className:"text-4xl text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No available engineers"})]})]})})]}),e.jsxs(D,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg",children:e.jsx(q,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Select Driver"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("select",{value:l,onChange:r=>M(r.target.value),className:"w-full p-4 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 dark:text-gray-200",children:[e.jsx("option",{value:"",className:"dark:bg-gray-700 dark:text-gray-200",children:"Choose a driver"}),n.map(r=>e.jsxs("option",{value:r._id,className:"dark:bg-gray-700 dark:text-gray-200",children:[r.firstName," ",r.lastName]},r._id))]}),l&&e.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsx(S,{src:(y=n.find(r=>r._id===l))==null?void 0:y.profileImage,size:40,className:"ring-2 ring-white dark:ring-gray-800"}),e.jsxs("span",{className:"ml-3 dark:text-gray-200 font-medium",children:[(C=n.find(r=>r._id===l))==null?void 0:C.firstName," ",(j=n.find(r=>r._id===l))==null?void 0:j.lastName]}),e.jsx(E,{className:"ml-auto text-green-500 text-xl"})]}),n.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"text-4xl text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No available drivers"})]}),e.jsx("div",{className:"mt-8",children:e.jsx(J,{variant:"solid",loading:o,onClick:s,className:"w-full bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",disabled:p.length===0||n.length===0,icon:!o&&e.jsx(E,{}),children:o?"Assigning Team...":"Assign Team"})})]})})]})]}),(d.length>0||l)&&e.jsxs(D,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden mt-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg",children:e.jsx(E,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Team Summary"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Selected Workers (",d.length,")"]}),e.jsx("div",{className:"space-y-2",children:d.map(r=>{const g=p.find(v=>v._id===r);return g?e.jsxs("div",{className:"flex items-center p-2 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 rounded-lg",children:[e.jsx(S,{src:g.profileImage,size:30}),e.jsxs("span",{className:"ml-2 dark:text-gray-200 text-sm",children:[g.firstName," ",g.lastName]})]},r):null})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Selected Driver"}),l&&e.jsxs("div",{className:"flex items-center p-3 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 rounded-lg",children:[e.jsx(S,{src:(O=n.find(r=>r._id===l))==null?void 0:O.profileImage,size:30}),e.jsxs("span",{className:"ml-2 dark:text-gray-200",children:[(N=n.find(r=>r._id===l))==null?void 0:N.firstName," ",(k=n.find(r=>r._id===l))==null?void 0:k.lastName]})]})]})]})})]})]})})};export{ze as default};
