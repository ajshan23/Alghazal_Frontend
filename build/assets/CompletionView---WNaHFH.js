import{r as c,j as e,ab as C,u as ce,a8 as me,v as pe,T as _,b as I}from"./index-cbxZr22l.js";import{C as xe}from"./Views-B4cM7RDw.js";import{C as ge}from"./Card-RZl4E4-O.js";import{B as m}from"./Button-FHJPdulA.js";import{L as he}from"./Logo-BoMrS7-Y.js";import{aY as ue,_ as be,af as Y,ay as fe,n as T,ar as V,ad as H,aB as je,b7 as L,b8 as K,b9 as J}from"./index-DGePi-hy.js";import{u as ye}from"./useThemeClass-C-wX5hDk.js";import"./Alert-CSp5bS7v.js";import"./index-5KOQOspk.js";import"./Badge-DfD0Ukso.js";import"./index-CpMcTudo.js";import"./index-CX5Y9eeL.js";import{D as Z}from"./Dialog-OmmgehMy.js";import"./Drawer-Dn9ylrlH.js";import"./index-BM7LESIb.js";import{F as ve,a as Q}from"./FormItem-Dsb0hqaN.js";import"./useUniqueId-uw_CuIVG.js";import{I as U}from"./Input-CoANB9Wy.js";import{U as ke}from"./Upload-DyKyTg7Q.js";import"./index-BLEb6Y8m.js";import{t as x,N as g}from"./toast-BCRt4NsN.js";import"./index-B6FuZSSV.js";import"./ScrollBar-B_8Ws9P0.js";import"./Select-DnpJ3Vfh.js";import"./Tag-DRJajbyJ.js";import"./context-Ci1lPV1_.js";import"./StatusIcon-CfTAV1XC.js";import"./CloseButton-BgX1UjTO.js";import"./proxy-CCW0hh_w.js";import"./floating-ui.react-CXyQfini.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-pMPtRiQM.js";import"./_getPrototype-DErBkxwa.js";import"./index-DdVDk-x0.js";import"./index-BUmdAIPo.js";import"./toString-DDHIFlh6.js";import"./chainedFunction-BxZSneMW.js";import"./index-C8fXiORa.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-85N_kEkV.js";const Ne=({isOpen:i,onClose:a,onUpload:s,projectId:o})=>{const[d,y]=c.useState([]),[b,j]=c.useState([]),[N,f]=c.useState([]),E=c.useRef(null),S=r=>{if(r&&r.length>0){const l=Array.from(r).map(n=>({id:`${n.name}-${Date.now()}`,name:n.name,type:n.type,size:n.size,file:n}));y(n=>[...n,...l]),j(n=>[...n,...l.map(()=>"")]),f(n=>[...n,...l.map(()=>"")])}return!1},w=(r,l)=>{j(n=>{const h=[...n];return h[r]=l,h})},F=(r,l)=>{f(n=>{const h=[...n];return h[r]=l,h})},D=r=>{y(l=>l.filter((n,h)=>h!==r)),j(l=>l.filter((n,h)=>h!==r)),f(l=>l.filter((n,h)=>h!==r))},v=()=>{const r=d.map(l=>l.file);s(r,b,N),y([]),j([]),f([]),a()};return e.jsxs(Z,{isOpen:i,onClose:a,onRequestClose:a,width:800,children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h4",{children:"Upload Work Completion Images"})}),e.jsxs("div",{className:"mb-6",children:[e.jsx(ke,{ref:E,beforeUpload:S,showList:!1,multiple:!0,accept:"image/*",children:e.jsx(m,{variant:"solid",icon:e.jsx(ue,{}),type:"button",children:"Select Images"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Upload images of completed work (JPEG, PNG)"})]}),d.length>0&&e.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.map((r,l)=>e.jsx("div",{className:"mb-4 p-4 border rounded",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded overflow-hidden",children:r.type.startsWith("image/")&&e.jsx("img",{src:URL.createObjectURL(r.file),alt:r.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1",children:e.jsxs(ve,{children:[e.jsx(Q,{label:"Title",className:"mb-3",children:e.jsx(U,{value:b[l]||"",onChange:n=>w(l,n.target.value),placeholder:"Enter image title",required:!0})}),e.jsx(Q,{label:"Description (Optional)",children:e.jsx(U,{value:N[l]||"",onChange:n=>F(l,n.target.value),placeholder:"Enter description"})})]})}),e.jsx(m,{shape:"circle",variant:"plain",icon:e.jsx(be,{}),onClick:()=>D(l),className:"text-red-500 hover:text-red-600"})]})},r.id))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(m,{variant:"plain",onClick:a,children:"Cancel"}),e.jsx(m,{variant:"solid",onClick:v,disabled:d.length===0||b.some(r=>!(r!=null&&r.trim())),children:"Upload Images"})]})]})},we=({isOpen:i,onClose:a,onSend:s,loading:o=!1})=>{const[d,y]=c.useState([]),[b,j]=c.useState(""),[N,f]=c.useState(""),E=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.trim()),S=()=>{const r=b.trim();if(r){if(!E(r)){f("Please enter a valid email address");return}if(d.includes(r)){f("This email is already added");return}y([...d,r]),j(""),f("")}},w=r=>{y(d.filter(l=>l!==r))},F=r=>{r.key==="Enter"&&(r.preventDefault(),S())},D=()=>{s(d),v()},v=()=>{y([]),j(""),f(""),a()};return e.jsx(Z,{isOpen:i,onClose:v,width:600,children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-lg",children:e.jsx(Y,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Send Quotation Email"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add CC recipients (optional)"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"CC Email Addresses"}),d.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:d.map((r,l)=>e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-full text-sm font-medium shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("span",{children:r}),e.jsx("button",{onClick:()=>w(r),className:"hover:bg-white/20 rounded-full p-0.5 transition-colors",type:"button",children:e.jsx(fe,{className:"text-sm"})})]},l))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{type:"email",placeholder:"Enter email address and press Enter",value:b,onChange:r=>{j(r.target.value),f("")},onKeyDown:F,className:"flex-1"}),e.jsx(m,{variant:"solid",onClick:S,className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:"Add"})]}),N&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:N}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Press Enter or click Add to add an email address"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Note:"})," The quotation will be sent to the client's email address. CC recipients will receive a copy of the email with the quotation PDF attached."]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(m,{variant:"plain",onClick:v,disabled:o,children:"Cancel"}),e.jsx(m,{variant:"solid",loading:o,onClick:D,icon:e.jsx(Y,{}),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:o?"Sending...":d.length>0?`Send to ${d.length} CC`:"Send Email"})]})]})})},X=async i=>{try{const a=await C.get(`/work-completion/project/${i}/work-comp`);return console.log(a.data),a.data}catch(a){throw console.error("Error fetching completion data:",a),a}},Ce=async i=>{try{const a=new FormData;return i.images.forEach(o=>{a.append("images",o)}),i.titles.forEach(o=>{a.append("titles",o)}),i.descriptions&&i.descriptions.forEach(o=>{a.append("descriptions",o)}),(await C.post(`/work-completion/project/${i.projectId}/images`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error uploading completion images:",a),a}},De=async i=>{try{return(await C.post("/work-completion",{projectId:i})).data}catch(a){throw console.error("Error creating work completion:",a),a}},Ee=async i=>{var a;try{const s=await C.get(`/work-completion/project/${i}/certificate`,{responseType:"blob"}),o=window.URL.createObjectURL(new Blob([s.data])),d=document.createElement("a");return d.href=o,d.setAttribute("download","completion-certificate.pdf"),document.body.appendChild(d),d.click(),(a=d.parentNode)==null||a.removeChild(d),window.URL.revokeObjectURL(o),s.data}catch(s){throw console.error("Error downloading completion certificate:",s),s}},Se=async(i,a)=>{try{return(await C.put(`/work-completion/project/${i}/completion-date`,{date:a})).data}catch(s){throw console.error("Error updating completion date:",s),s}},Ue=async(i,a)=>{try{return(await C.put(`/work-completion/project/${i}/handover-date`,{date:a})).data}catch(s){throw console.error("Error updating handover date:",s),s}},Fe=async(i,a)=>{try{return(await C.put(`/work-completion/project/${i}/acceptance-date`,{date:a})).data}catch(s){throw console.error("Error updating acceptance date:",s),s}},Pe=async(i,a=[])=>{try{return(await C.post(`/work-completion/project/${i}/send-email`,{cc:a})).data}catch(s){throw console.error("Error sending work completion email:",s),s}},Me=()=>{ye();const i=ce(t=>t.theme.mode),[a,s]=c.useState(!0),[o,d]=c.useState(null),[y,b]=c.useState(null),[j,N]=c.useState(!1),[f,E]=c.useState(!1),[S,w]=c.useState(!1),[F,D]=c.useState(!1),[v,r]=c.useState(!1),[l,n]=c.useState(!1),[h,O]=c.useState(!1),[ee,A]=c.useState(!1),[R,$]=c.useState(""),[z,B]=c.useState(""),[W,q]=c.useState(""),{projectId:u}=me(),re=pe(),te=async()=>{try{s(!0);const t=await X(u);d(t.data)}catch(t){console.error("Error fetching completion data:",t),b("Failed to load completion data")}finally{s(!1)}};c.useEffect(()=>{u||re("/app/dashboard"),te()},[u]);const ae=async(t,p,k)=>{var P,G;try{s(!0),await Ce({projectId:u,images:t,titles:p,descriptions:k});const M=await X(u);d(M.data),x.push(e.jsx(g,{title:"Success",type:"success",children:"Images uploaded successfully"}))}catch(M){console.error("Error uploading images:",M),x.push(e.jsxs(g,{title:"Error",type:"danger",children:["Failed to upload images: ",((G=(P=M.response)==null?void 0:P.data)==null?void 0:G.message)||M.message]}))}finally{s(!1)}},se=async()=>{try{r(!0);const t=await De(u);d(t.data),x.push(e.jsx(g,{title:"Success",type:"success",children:"Work completion created successfully"}))}catch(t){console.error("Error creating work completion:",t),x.push(e.jsx(g,{title:"Error",type:"danger",children:"Failed to create work completion"}))}finally{r(!1)}},oe=async()=>{var t;N(!0),b("");try{await Ee(u),x.push(e.jsx(g,{title:"Success",type:"success",children:"PDF downloaded successfully"}))}catch(p){console.error("Error downloading PDF:",p),b("Failed to download PDF");let k="Failed to download PDF";p.response&&(p.response.status===404?k="Project data not found for PDF generation":p.response.status===400?k="Invalid project data for PDF generation":(t=p.response.data)!=null&&t.message&&(k=p.response.data.message)),x.push(e.jsx(g,{title:"Error",type:"danger",children:k}))}finally{N(!1)}},le=async t=>{var p,k;if(u){E(!0),b("");try{await Pe(u,t),x.push(e.jsx(g,{title:"Success",type:"success",children:"Work completion email sent successfully"})),D(!1)}catch(P){b("Failed to send email"),x.push(e.jsx(g,{title:"Error",type:"danger",children:((k=(p=P.response)==null?void 0:p.data)==null?void 0:k.message)||P.message||"Failed to send email"}))}finally{E(!1)}}},de=async()=>{try{s(!0);const t=await Se(u,R);d(t.data),x.push(e.jsx(g,{title:"Success",type:"success",children:"Completion date updated successfully"})),n(!1)}catch(t){console.error("Error updating completion date:",t),x.push(e.jsx(g,{title:"Error",type:"danger",children:"Failed to update completion date"}))}finally{s(!1)}},ne=async()=>{try{s(!0);const t=await Ue(u,z);d(t.data),x.push(e.jsx(g,{title:"Success",type:"success",children:"Handover date updated successfully"})),O(!1)}catch(t){console.error("Error updating handover date:",t),x.push(e.jsx(g,{title:"Error",type:"danger",children:"Failed to update handover date"}))}finally{s(!1)}},ie=async()=>{try{s(!0);const t=await Fe(u,W);d(t.data),x.push(e.jsx(g,{title:"Success",type:"success",children:"Acceptance date updated successfully"})),A(!1)}catch(t){console.error("Error updating acceptance date:",t),x.push(e.jsx(g,{title:"Error",type:"danger",children:"Failed to update acceptance date"}))}finally{s(!1)}};return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-red-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 max-w-md mx-4",children:[e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(T,{className:"text-2xl text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Error Loading Completion"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-6",children:y}),e.jsx(m,{className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",onClick:()=>window.location.reload(),children:"Try Again"})]})}):o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsxs(_,{loading:a,children:[e.jsx(Ne,{isOpen:S,onClose:()=>w(!1),onUpload:ae,projectId:u}),e.jsx(we,{isOpen:F,onClose:()=>D(!1),onSend:le,loading:f}),e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsx("div",{className:"w-96",children:e.jsx(he,{className:"w-full h-auto",mode:i})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg",children:e.jsx(T,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Project Details"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"FM Contractor"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-white mt-1",children:o.fmContractor})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Sub Contractor"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-white mt-1",children:o.subContractor})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Project Description"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-white mt-1",children:o.projectDescription})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Location"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-white mt-1",children:o.location})]})]})]}),e.jsx("div",{className:"mt-8 p-6 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 dark:from-blue-900/20 dark:via-indigo-900/20 dark:to-purple-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsx("p",{className:"text-center text-lg italic text-gray-700 dark:text-gray-300 leading-relaxed",children:'"This is to certify that the work described above on project description has been cleared out and completed."'})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-teal-600 rounded-lg",children:e.jsx(V,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Hand Over By"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("label",{className:"text-sm font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide",children:"Company"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-1",children:o.handover.company})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("label",{className:"text-sm font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide",children:"Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-1",children:o.handover.name})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("label",{className:"text-sm font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide",children:"Date"}),h?e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(U,{type:"date",value:z,onChange:t=>B(t.target.value),className:"flex-1"}),e.jsx(m,{size:"sm",onClick:ne,children:"Save"}),e.jsx(m,{size:"sm",variant:"plain",onClick:()=>O(!1),children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:I(o.handover.date).format("MMM DD, YYYY")}),e.jsx("button",{onClick:()=>{B(o.handover.date.split("T")[0]),O(!0)},className:"p-2 hover:bg-green-100 dark:hover:bg-green-900/50 rounded-lg transition-colors",children:e.jsx(H,{className:"text-green-500"})})]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg",children:e.jsx(V,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Accepted By"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-200 dark:border-purple-800",children:[e.jsx("label",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Company"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-1",children:o.acceptance.company})]}),e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-200 dark:border-purple-800",children:[e.jsx("label",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-1",children:o.acceptance.name})]}),e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-200 dark:border-purple-800",children:[e.jsx("label",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Date"}),ee?e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(U,{type:"date",value:W,onChange:t=>q(t.target.value),className:"flex-1"}),e.jsx(m,{size:"sm",onClick:ie,children:"Save"}),e.jsx(m,{size:"sm",variant:"plain",onClick:()=>A(!1),children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:I(o.acceptance.date).format("MMM DD, YYYY")}),e.jsx("button",{onClick:()=>{q(o.acceptance.date.split("T")[0]),A(!0)},className:"p-2 hover:bg-purple-100 dark:hover:bg-purple-900/50 rounded-lg transition-colors",children:e.jsx(H,{className:"text-purple-500"})})]})]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-amber-600 rounded-lg",children:e.jsx(je,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Completion Information"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("label",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Completion Date"}),l?e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(U,{type:"date",value:R,onChange:t=>$(t.target.value),className:"flex-1"}),e.jsx(m,{size:"sm",onClick:de,children:"Save"}),e.jsx(m,{size:"sm",variant:"plain",onClick:()=>n(!1),children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:I(o.completionDate).format("MMM DD, YYYY")}),e.jsx("button",{onClick:()=>{$(o.completionDate.split("T")[0]),n(!0)},className:"p-2 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",children:e.jsx(H,{className:"text-blue-500"})})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("label",{className:"text-sm font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide",children:"LPO Number"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-2",children:o.lpoNumber})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200 dark:border-purple-800",children:[e.jsx("label",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"LPO Date"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-2",children:I(o.lpoDate).format("MMM DD, YYYY")})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-blue-600 rounded-lg",children:e.jsx(L,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Site Pictures"})]}),e.jsx(m,{variant:"solid",icon:e.jsx(K,{}),onClick:()=>w(!0),className:"bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:"Add Images"})]})}),e.jsx("div",{className:"p-6",children:o.sitePictures&&o.sitePictures.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.sitePictures.map((t,p)=>e.jsxs("div",{className:"group bg-white dark:bg-gray-700 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-600 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx("img",{src:t.url,alt:t.caption||`Site Image ${p+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),t.caption&&e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 text-center",children:t.caption})})]},`image-${p}`))}):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700",children:[e.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-600 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(L,{className:"text-2xl text-gray-400"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"No Images Uploaded"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Upload site pictures to document project completion"}),e.jsx(m,{variant:"solid",icon:e.jsx(K,{}),onClick:()=>w(!0),className:"bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:"Upload Images"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg",children:e.jsx(J,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Actions"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(m,{size:"lg",variant:"solid",icon:e.jsx(L,{}),onClick:()=>w(!0),className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:"Add More Images"}),e.jsx(m,{size:"lg",variant:"solid",loading:j,icon:e.jsx(J,{}),onClick:oe,className:"flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:j?"Generating PDF...":"Download Certificate"}),e.jsx(m,{size:"lg",variant:"solid",icon:e.jsx(Y,{}),onClick:()=>D(!0),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:"Send Email"})]})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 max-w-md mx-4",children:[e.jsx(_,{loading:v}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(T,{className:"text-2xl text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"No Completion Record Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"No work completion record exists for this project yet."}),e.jsx(m,{variant:"solid",loading:v,onClick:se,className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold px-8 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:v?"Creating...":"Create Work Completion"})]})]})})},yr=()=>e.jsx(xe,{className:"h-full",children:e.jsx(ge,{className:"h-full",bodyClass:"h-full",children:e.jsx(Me,{})})});export{yr as default};
