import{j as e,G as J,r as j,v as G,a8 as K}from"./index-DGJe0h3_.js";import{C as Q}from"./Views-BFlyERhL.js";import{A as X}from"./AdaptableCard-BnEcGD7j.js";import{a7 as Y,aq as Z,f as W,ar as H,W as V,n as P,an as q,j as ee,as as re,at as te,ao as ae,ap as se,$ as ie,x as le,N as oe}from"./index-DB0cxP-C.js";import{I as z,g as L}from"./Input-k-NORbeb.js";import{B as k}from"./Button-CQnyK8gC.js";import{F as M,a as C}from"./FormItem-CS5k__-u.js";import{F as O,a as F,b as D}from"./formik.esm-Bd7bPKfV.js";import{c as R,b as S}from"./index.esm-Kw287qmC.js";import{f as ne,a as de,e as ce,c as me}from"./api-qUrvQzIF.js";import{d as xe}from"./debounce-BytNY59r.js";import"./Alert-DQXwajGW.js";import"./index-BoJTJILF.js";import"./Badge-Bbo5QMXa.js";import"./index-CIbY2fIk.js";import{C as $}from"./Card-BM0eEatX.js";import"./index-BGu1WFOe.js";import"./Dialog-Cg-T3Ihd.js";import"./Drawer-CLVcPT2Q.js";import"./index-Bv5Pt-_w.js";import"./useUniqueId-D1PCBCG9.js";import"./Upload-BgdP_nuh.js";import"./index-1STGvrfH.js";import{t as _,N as U}from"./toast-DO-2lc6K.js";import"./index-nUD77ZMI.js";import"./ScrollBar-nZR6U59l.js";import"./Select-C04L81V4.js";import"./Tag-BPJKpn67.js";import"./context-DBc_qd6o.js";import"./toString-Dkf6_Dxj.js";import"./index-C4_xw0Qz.js";import"./proxy-BoP70aqV.js";import"./cloneDeep-DJN0yfLA.js";import"./hoist-non-react-statics.cjs-DodG7NJv.js";import"./StatusIcon-BdTPNP40.js";import"./CloseButton-CGoFVruc.js";import"./floating-ui.react-DD89AqSX.js";import"./floating-ui.dom-B_iSk-nO.js";import"./_getPrototype-0ulQvO4z.js";import"./index-Blf2GdN6.js";import"./index-CXaN8JhO.js";import"./chainedFunction-BxZSneMW.js";import"./index-TU9pDyqH.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";const ge=({currentStep:t,steps:d,onStepChange:l,completed:n})=>{const y=i=>i<n?"completed":i===t?"current":i<=n?"available":"locked",p=(i,x)=>{const a="transition-all duration-300 ease-in-out";switch(x){case"completed":return{container:`${a} opacity-100 cursor-pointer hover:bg-gradient-to-r hover:from-green-50 hover:to-emerald-50 dark:hover:from-green-900/20 dark:hover:to-emerald-900/20`,iconContainer:"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg",text:"text-gray-800 dark:text-white font-medium",connector:"bg-gradient-to-b from-green-500 to-emerald-600"};case"current":return{container:`${a} opacity-100 cursor-pointer bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-800 dark:via-gray-750 dark:to-gray-700 border-l-4 border-blue-500`,iconContainer:`bg-gradient-to-r ${i.gradient||"from-blue-500 to-indigo-600"} text-white shadow-xl`,text:"text-gray-900 dark:text-white font-bold",connector:`bg-gradient-to-b ${i.gradient||"from-blue-500 to-indigo-600"}`};case"available":return{container:`${a} opacity-90 cursor-pointer hover:bg-gradient-to-r hover:from-gray-50 hover:to-blue-50 dark:hover:from-gray-800 dark:hover:to-gray-750`,iconContainer:"bg-gradient-to-r from-gray-400 to-gray-500 text-white shadow-md",text:"text-gray-700 dark:text-gray-300 font-medium",connector:"bg-gradient-to-b from-gray-400 to-gray-500"};default:return{container:`${a} opacity-50 cursor-not-allowed`,iconContainer:"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-500 shadow-sm",text:"text-gray-400 dark:text-gray-600",connector:"bg-gray-300 dark:bg-gray-600"}}};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700"}),d.map((i,x)=>{const a=y(i.value),f=p(i,a),g=x===d.length-1,N=i.value<=n;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`
                relative flex items-center p-4 rounded-xl mb-3 border border-transparent
                ${f.container}
                ${N?"hover:shadow-lg hover:scale-[1.02]":""}
              `,onClick:()=>N&&l(i.value),children:[e.jsx("div",{className:`
                relative z-10 flex items-center justify-center w-12 h-12 rounded-xl
                ${f.iconContainer}
                ${N?"hover:scale-110":""}
                transition-transform duration-200
              `,children:a==="completed"?e.jsx(Y,{className:"text-2xl"}):a==="locked"?e.jsx(Z,{className:"text-xl"}):i.icon||e.jsx("span",{className:"text-lg font-bold",children:i.value+1})}),e.jsx("div",{className:"ml-4 flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg ${f.text}`,children:i.label}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:a==="completed"?"Completed":a==="current"?"In Progress":a==="available"?"Available":"Locked"})]}),e.jsxs("div",{className:`
                    px-3 py-1 rounded-full text-sm font-medium
                    ${a==="current"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":a==="completed"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}
                  `,children:["Step ",i.value+1]})]})})]}),!g&&e.jsx("div",{className:`
                absolute left-6 top-16 w-0.5 h-8 z-0
                ${a==="completed"||a==="current"&&x<t?f.connector:"bg-gray-200 dark:bg-gray-700"}
              `}),a==="current"&&e.jsx("div",{className:"absolute -left-1 top-8 w-2 h-8 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full animate-pulse"})]},i.value)}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-gray-800 dark:via-gray-850 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[Math.round((n+1)/d.length*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${(n+1)/d.length*100}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[n+1," of ",d.length," steps completed"]})]})]})};function he(t){return J({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"},child:[]},{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(t)}const be=({data:t,onNext:d})=>{const[l,n]=j.useState([]),[y,p]=j.useState(!1),[i,x]=j.useState((t==null?void 0:t.clientData._id)??!1),[a,f]=j.useState((t==null?void 0:t.clientData)??null),g=G(),N=R().shape({clientName:S().required("Client Name is required")}),w=xe(async o=>{var r;try{p(!0);const h=await ne({search:o});n(((r=h==null?void 0:h.data)==null?void 0:r.clients)||[])}catch(h){console.error("Failed to fetch clients:",h),n([])}finally{p(!1)}},300);j.useEffect(()=>()=>{w.cancel()},[w]);const s=o=>{x(!0),f(o),n([])},m=()=>{x(!1),f(null),n([])};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:e.jsx(W,{className:"text-3xl text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Client Information"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Search and select an existing client or create a new one to proceed with your project setup"})]}),e.jsx(O,{initialValues:t,validationSchema:N,onSubmit:o=>{i&&a&&d({...o,clientData:a})},children:({values:o,touched:r,errors:h,handleChange:c,handleBlur:u,setFieldValue:A})=>e.jsx(F,{children:e.jsx(M,{children:e.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50 to-indigo-50 dark:from-gray-800 dark:via-gray-850 dark:to-gray-900 rounded-2xl p-6 border border-blue-200 dark:border-gray-700 shadow-lg",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(C,{label:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"text-lg text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:"Search Client"})]}),invalid:h.clientName&&r.clientName,errorMessage:h.clientName,children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{name:"clientName",placeholder:"Type client name to search...",value:o.clientName,onChange:b=>{c(b),x(!1),b.target.value.length>0?w(b.target.value):n([])},onBlur:()=>{u("clientName"),setTimeout(()=>n([]),200)},className:"pr-10 text-lg py-3 border-2 border-blue-200 dark:border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),y&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-500 border-t-transparent"})}),i&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(H,{className:"text-green-500 text-xl"})}),l.length>0&&!i&&e.jsx("div",{className:"absolute z-20 mt-2 w-full bg-white dark:bg-gray-800 shadow-xl rounded-xl border border-gray-200 dark:border-gray-600 max-h-60 overflow-auto",children:l.map((b,I)=>e.jsx("div",{className:"px-4 py-3 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 dark:hover:from-gray-700 dark:hover:to-gray-650 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-0 transition-all duration-200",onMouseDown:()=>{A("clientName",b.clientName),o.clientData={_id:b._id,clientAddress:b.clientAddress,clientName:b.clientName,mobileNumber:b.mobileNumber,pincode:b.pincode,telephoneNumber:b.telephoneNumber,trnNumber:b.trnNumber},s(b)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:b.clientName}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.mobileNumber})]}),e.jsxs("div",{className:"text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:["TRN: ",b.trnNumber]})]})},I))})]})})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(k,{type:"button",className:"w-12 h-12 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 border-0 shadow-lg hover:shadow-xl transition-all duration-200",icon:e.jsx(he,{className:"text-xl"}),onClick:()=>g("/app/client-new")}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 text-center",children:"Add Client"})]})]})}),i&&a&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 via-emerald-50 to-teal-50 dark:from-green-900/20 dark:via-emerald-900/20 dark:to-teal-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6 shadow-inner",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg",children:e.jsx(H,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Selected Client"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Client details loaded successfully"})]})]}),e.jsx(k,{type:"button",size:"sm",variant:"plain",onClick:m,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Change"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Client Name"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold",children:a.clientName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mobile Number"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold",children:a.mobileNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"TRN Number"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold",children:a.trnNumber})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Address"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold",children:a.clientAddress})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pincode"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold",children:a.pincode})]}),a.telephoneNumber&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telephone"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold",children:a.telephoneNumber})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsx(k,{variant:"solid",type:"submit",disabled:!i,size:"lg",className:`px-8 py-3 font-semibold text-lg rounded-xl shadow-lg transition-all duration-200 ${i?"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 hover:shadow-xl hover:scale-105":"bg-gray-400 cursor-not-allowed"}`,children:"Continue to Project Details"})})]})})})})]})},pe=({data:t,onBack:d,onSubmit:l})=>{const n=t.clientData.locations.find(p=>p.name===t.location),y=n==null?void 0:n.buildings.find(p=>p.name===t.building);return y==null||y.apartments.find(p=>p.number===(t==null?void 0:t.apartmentNumber)),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-500 to-amber-600 rounded-2xl shadow-lg",children:e.jsx(H,{className:"text-3xl text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Project Review"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Review all the information before submitting your project"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white via-orange-50 to-amber-50 dark:from-gray-800 dark:via-gray-850 dark:to-gray-900 rounded-2xl p-8 border border-orange-200 dark:border-gray-700 shadow-lg",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl",children:e.jsx(W,{className:"text-2xl text-white"})}),e.jsx("h5",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Client Information"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx($,{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Client Name"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.clientName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Client Address"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.clientData.clientAddress||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pincode"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.clientData.pincode||"Not provided"})]})]})}),e.jsx($,{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mobile Number"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.clientData.mobileNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Telephone Number"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.clientData.telephoneNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"TRN Number"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.clientData.trnNumber||"Not provided"})]})]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl",children:e.jsx(P,{className:"text-2xl text-white"})}),e.jsx("h5",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Project Information"})]}),e.jsx($,{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Project Name"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.projectName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Project Description"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.projectDescription||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Attention"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.attention||"Not provided"})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-teal-600 rounded-xl",children:e.jsx(q,{className:"text-2xl text-white"})}),e.jsx("h5",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Address Information"})]}),e.jsx($,{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Location"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.location||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Building"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.building||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Apartment"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.apartmentNumber||"Not provided"})]})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 rounded-xl p-4 border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Form Completion"}),e.jsx("span",{className:"text-sm font-bold text-orange-600 dark:text-orange-400",children:"100% Complete"})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-600 h-2 rounded-full w-full transition-all duration-300"})})]})}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(k,{type:"button",onClick:d,variant:"plain",size:"lg",className:"px-6 py-3 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-semibold transition-all duration-200",children:"Back to Address"}),e.jsx(k,{variant:"solid",onClick:l,size:"lg",className:"px-8 py-3 bg-gradient-to-r from-orange-600 to-amber-700 hover:from-orange-700 hover:to-amber-800 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200",children:"Submit Project"})]})]})]})},ue=R().shape({projectName:S().required("Project Name is Required"),projectDescription:S().required("Project Description is Required"),attention:S().required("Attention field is Required")}),je=({data:t={projectName:"",projectDescription:"",attention:""},onNextChange:d,onBackChange:l,currentStepStatus:n})=>{const y=(i,x)=>{d==null||d(i,"ProjectInformation",x)},p=()=>{l==null||l()};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl shadow-lg",children:e.jsx(P,{className:"text-3xl text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Project Information"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Fill in your project information to help us speed up the verification process"})]}),e.jsx(O,{enableReinitialize:!0,initialValues:t,validationSchema:ue,onSubmit:(i,{setSubmitting:x})=>{y(i,x)},children:({values:i,touched:x,errors:a,isSubmitting:f})=>e.jsx(F,{children:e.jsx(M,{children:e.jsxs("div",{className:"bg-gradient-to-br from-white via-purple-50 to-indigo-50 dark:from-gray-800 dark:via-gray-850 dark:to-gray-900 rounded-2xl p-8 border border-purple-200 dark:border-gray-700 shadow-lg",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl",children:e.jsx(ee,{className:"text-2xl text-white"})}),e.jsx("h5",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Project Details"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsx(C,{label:e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(re,{className:"text-lg text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:"Project Name"})]}),invalid:!!(a.projectName&&x.projectName),errorMessage:a.projectName,children:e.jsx(D,{type:"text",autoComplete:"off",name:"projectName",placeholder:"Enter your project name...",component:z,className:"text-lg py-3 border-2 border-purple-200 dark:border-gray-600 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-lg"})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs(C,{label:e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(P,{className:"text-lg text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:"Project Description"})]}),invalid:!!(a.projectDescription&&x.projectDescription),errorMessage:a.projectDescription,children:[e.jsx(D,{as:"textarea",autoComplete:"off",name:"projectDescription",placeholder:"Describe your project in detail...",component:z,textArea:!0,rows:3,className:"text-lg py-3 border-2 border-purple-200 dark:border-gray-600 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-lg resize-none"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Provide a detailed description of your project goals, requirements, and scope."})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs(C,{label:e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(te,{className:"text-lg text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:"Attention"})]}),invalid:!!(a.attention&&x.attention),errorMessage:a.attention,children:[e.jsx(D,{type:"text",autoComplete:"off",name:"attention",placeholder:"Enter attention details...",component:z,className:"text-lg py-3 border-2 border-purple-200 dark:border-gray-600 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-lg"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Important notes or special instructions for this project."})]})})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Form Completion"}),e.jsx("span",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:"50% Complete"})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 h-2 rounded-full w-1/2 transition-all duration-300"})})]})}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(k,{type:"button",onClick:p,variant:"plain",size:"lg",className:"px-6 py-3 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-semibold transition-all duration-200",children:"Back to Client Details"}),e.jsx(k,{loading:f,variant:"solid",type:"submit",size:"lg",className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-indigo-700 hover:from-purple-700 hover:to-indigo-800 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200",children:n==="complete"?"Save Changes":"Continue to Address"})]})]})})})})]})},ye=R().shape({location:S().required("Location is required"),building:S().required("Building is required"),apartment:S().required("Apartment is required")}),fe=({data:t={location:"",building:"",apartment:"",clientData:{locations:[]}},onNextChange:d,onBackChange:l,currentStepStatus:n})=>{const[y,p]=j.useState([]),[i,x]=j.useState([]);j.useEffect(()=>{if(t.location&&t.clientData.locations.length>0){const s=t.clientData.locations.find(o=>o.name===t.location),m=(s==null?void 0:s.buildings)||[];if(p(m),t.building){const o=m.find(r=>r.name===t.building);x((o==null?void 0:o.apartments)||[])}}},[t.location,t.building,t.clientData.locations]);const a=(s,m)=>{d==null||d(s,"addressInformation",m)},f=()=>{l==null||l()},g=j.useCallback((s,m)=>L(s,m),[]),N=j.useCallback((s,m)=>L(s,m),[]),v=(s,m)=>{m("building",""),m("apartment","");const o=t.clientData.locations.find(r=>r.name===s);p((o==null?void 0:o.buildings)||[]),x([])},w=(s,m)=>{m("apartment","");const o=y.find(r=>r.name===s);x((o==null?void 0:o.apartments)||[])};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-500 to-teal-600 rounded-2xl shadow-lg",children:e.jsx(q,{className:"text-3xl text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Address Information"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Select the project location details from the client's registered properties"})]}),e.jsx(O,{enableReinitialize:!0,initialValues:{location:t.location||"",building:t.building||"",apartment:t.apartment||""},validationSchema:ye,onSubmit:(s,{setSubmitting:m})=>{m(!0),setTimeout(()=>{a(s,m)},1e3)},children:({values:s,touched:m,errors:o,isSubmitting:r,setFieldValue:h})=>e.jsx(F,{children:e.jsx(M,{children:e.jsxs("div",{className:"bg-gradient-to-br from-white via-green-50 to-teal-50 dark:from-gray-800 dark:via-gray-850 dark:to-gray-900 rounded-2xl p-8 border border-green-200 dark:border-gray-700 shadow-lg",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs(C,{label:e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(q,{className:"text-xl text-green-600"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:"Select Location"})]}),invalid:!!g(o,"location")&&!!N(m,"location"),errorMessage:g(o,"location"),children:[e.jsxs(D,{as:"select",name:"location",onChange:c=>{h("location",c.target.value),v(c.target.value,h)},className:"block w-full py-3 px-4 text-lg border-2 border-green-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Choose a location..."}),t.clientData.locations.map((c,u)=>e.jsx("option",{value:c.name,children:c.name},u))]}),t.clientData.locations.length===0&&e.jsx("p",{className:"text-sm text-orange-600 mt-2",children:"No locations found for this client. Please contact support."})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsx(C,{label:e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ae,{className:"text-xl text-green-600"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:"Select Building"})]}),invalid:!!g(o,"building")&&!!N(m,"building"),errorMessage:g(o,"building"),children:e.jsxs(D,{as:"select",name:"building",disabled:!s.location,onChange:c=>{h("building",c.target.value),w(c.target.value,h)},className:`block w-full py-3 px-4 text-lg border-2 bg-white dark:bg-gray-700 rounded-lg shadow-sm transition-all duration-200 ${s.location?"border-green-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500":"border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:s.location?"Choose a building...":"Select location first..."}),y.map((c,u)=>e.jsx("option",{value:c.name,children:c.name},u))]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsx(C,{label:e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(se,{className:"text-xl text-green-600"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:"Select Apartment"})]}),invalid:!!g(o,"apartment")&&!!N(m,"apartment"),errorMessage:g(o,"apartment"),children:e.jsxs(D,{as:"select",name:"apartment",disabled:!s.building,className:`block w-full py-3 px-4 text-lg border-2 bg-white dark:bg-gray-700 rounded-lg shadow-sm transition-all duration-200 ${s.building?"border-green-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500":"border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:s.building?"Choose an apartment...":"Select building first..."}),i.map((c,u)=>e.jsxs("option",{value:c.number,children:["Apartment ",c.number]},u))]})})})]}),s.location&&s.building&&s.apartment&&e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-green-50 to-teal-50 dark:from-green-900/20 dark:to-teal-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Selected Address"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:s.location})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Building:"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:s.building})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Apartment:"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:s.apartment})]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 dark:from-green-900/20 dark:to-teal-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Form Completion"}),e.jsx("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:"75% Complete"})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-teal-600 h-2 rounded-full w-3/4 transition-all duration-300"})})]})}),e.jsxs("div",{className:"flex justify-between gap-4 mt-8",children:[e.jsx(k,{type:"button",onClick:f,variant:"plain",size:"lg",className:"px-6 py-3 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-semibold transition-all duration-200",children:"Back to Project Details"}),e.jsx(k,{loading:r,variant:"solid",type:"submit",size:"lg",className:"px-8 py-3 bg-gradient-to-r from-green-600 to-teal-700 hover:from-green-700 hover:to-teal-800 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200",children:n==="complete"?"Save Changes":"Continue to Review"})]})]})})})})]})},xr=()=>{const t=G(),{id:d}=K(),[l,n]=j.useState(0),[y,p]=j.useState(0),[i,x]=j.useState(!1),[a,f]=j.useState(null),[g,N]=j.useState({clientName:"",projectName:"",projectDescription:"",attention:"",location:"",building:"",apartment:"",clientData:{_id:"",clientName:"",clientAddress:"",pincode:"",mobileNumber:"",telephoneNumber:"",trnNumber:"",locations:[]}}),v=[{label:"Client Details",value:0,icon:e.jsx(le,{className:"text-xl"}),gradient:"from-blue-400 via-blue-500 to-blue-600"},{label:"Project Details",value:1,icon:e.jsx(P,{className:"text-xl"}),gradient:"from-purple-400 via-purple-500 to-purple-600"},{label:"Address Information",value:2,icon:e.jsx(q,{className:"text-xl"}),gradient:"from-green-400 via-green-500 to-green-600"},{label:"Review",value:3,icon:e.jsx(oe,{className:"text-xl"}),gradient:"from-orange-400 via-orange-500 to-orange-600"}],w=(r,h,c)=>{N(u=>({...u,...r})),(l<v.length-2||l===v.length-2)&&n(l+1),p(u=>u>l+1?u:l+1),c==null||c(!1)},s=()=>{n(r=>Math.max(0,r-1))},m=async()=>{x(!0),f(null);try{const r={client:g.clientData._id,projectDescription:g.projectDescription,projectName:g.projectName,attention:g.attention,location:g.location,building:g.building,apartmentNumber:g.apartment};d?(await ce(d,r)).status===200&&(_.push(e.jsx(U,{title:"Successfully Updated project",type:"success",duration:2500,children:"Project successfully Updated"}),{placement:"top-center"}),t("/app/project-list")):(await me(r)).status===201&&(_.push(e.jsx(U,{title:"Successfully created project",type:"success",duration:2500,children:"Project successfully created"}),{placement:"top-center"}),t("/app/project-list"))}catch(r){console.error("Error submitting form:",r),f("Failed to create project. Please try again.")}finally{x(!1)}},o=async()=>{var h,c,u,A,b,I,E,B,T;const{data:r}=await de(d);N({clientData:{_id:(h=r==null?void 0:r.client)==null?void 0:h._id,clientName:(c=r==null?void 0:r.client)==null?void 0:c.clientName,clientAddress:(u=r==null?void 0:r.client)==null?void 0:u.clientAddress,mobileNumber:(A=r==null?void 0:r.client)==null?void 0:A.mobileNumber,telephoneNumber:(b=r==null?void 0:r.client)==null?void 0:b.telephoneNumber,trnNumber:(I=r==null?void 0:r.client)==null?void 0:I.trnNumber,pincode:(E=r==null?void 0:r.client)==null?void 0:E.pincode,locations:((B=r==null?void 0:r.client)==null?void 0:B.locations)||[]},projectName:r==null?void 0:r.projectName,projectDescription:r==null?void 0:r.projectDescription,attention:(r==null?void 0:r.attention)||"",location:(r==null?void 0:r.location)||"",building:(r==null?void 0:r.building)||"",apartment:(r==null?void 0:r.apartmentNumber)||"",clientName:(T=r==null?void 0:r.client)==null?void 0:T.clientName}),p(3),n(3)};return j.useEffect(()=>{d&&o()},[d]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsxs(Q,{className:"h-full",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg",children:e.jsx(ie,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:d?"Edit Project":"Create New Project"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:d?"Update project details":"Set up a new project with client information"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(P,{className:"text-2xl text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Project Setup"})]})}),e.jsx("div",{className:"p-8",children:e.jsx(X,{bodyClass:"h-full",children:e.jsxs("div",{className:"flex flex-row md:flex-col w-full",children:[e.jsx("div",{className:"2xl:col-span-1 xl:col-span-1 lg:col-span-2",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-800 dark:via-gray-850 dark:to-gray-900 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-6",children:"Form Progress"}),e.jsx(ge,{currentStep:l,steps:v,onStepChange:n,completed:y})]})}),e.jsx("div",{className:"2xl:col-span-4 lg:col-span-3 xl:col-span-2",children:e.jsxs("div",{className:"bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-850 dark:to-gray-900 rounded-2xl p-8 border-2 border-gray-100 dark:border-gray-700 shadow-xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${v[l].gradient} text-white shadow-lg`,children:v[l].icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:v[l].label}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Step ",l+1," of ",v.length]})]})]}),e.jsx("div",{className:`w-full h-1 bg-gradient-to-r ${v[l].gradient} rounded-full`})]}),a&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg dark:bg-red-900/30 dark:text-red-400 dark:border-red-800",children:a}),e.jsxs("div",{className:"space-y-6",children:[l===0&&e.jsx(be,{data:g,onNext:w}),l===1&&e.jsx(je,{data:g,onNextChange:w,onBackChange:s}),l===2&&e.jsx(fe,{data:g,onNextChange:(r,h,c)=>{N(u=>({...u,...r})),n(3),c(!1)},onBackChange:s}),l===3&&e.jsx(pe,{data:g,onBack:s,onSubmit:m})]})]})})]})})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:d?"Updating project...":"Creating project..."})]})})})]})})};export{xr as default};
