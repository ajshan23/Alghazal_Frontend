import{ab as P,j as e,r as o,b as E,u as ue,a8 as ye,T as K}from"./index-DGJe0h3_.js";import{C as je}from"./Views-BFlyERhL.js";import{C as k}from"./Card-BM0eEatX.js";import{B as j}from"./Button-CQnyK8gC.js";import{L as fe}from"./Logo-xgl6LQmA.js";import"./Alert-DQXwajGW.js";import{A as Ne}from"./index-BoJTJILF.js";import{B as ve}from"./Badge-Bbo5QMXa.js";import"./index-CIbY2fIk.js";import{T as de}from"./index-BGu1WFOe.js";import{D as L}from"./Dialog-Cg-T3Ihd.js";import"./Drawer-CLVcPT2Q.js";import"./index-Bv5Pt-_w.js";import"./FormItem-CS5k__-u.js";import"./useUniqueId-D1PCBCG9.js";import{I as ke}from"./Input-k-NORbeb.js";import"./Upload-BgdP_nuh.js";import"./index-1STGvrfH.js";import{t as g,N as h}from"./toast-DO-2lc6K.js";import"./index-nUD77ZMI.js";import"./ScrollBar-nZR6U59l.js";import"./Select-C04L81V4.js";import"./Tag-BPJKpn67.js";import{u as we}from"./useThemeClass-CWxsYH8M.js";import{u as De,f as X,c as Ee,d as Se}from"./index-BX8TTJWs.js";import{N as oe}from"./react-number-format.es-BJLXJgn2.js";import{a0 as ee,ba as Me,aa as re,a1 as te,a2 as O,b4 as Ce,a6 as Te,a3 as Re,a9 as Ye,a5 as ae,ad as se,a7 as Pe,ai as Ie,Y as Ae}from"./index-DB0cxP-C.js";import"./context-DBc_qd6o.js";import"./StatusIcon-BdTPNP40.js";import"./CloseButton-CGoFVruc.js";import"./proxy-BoP70aqV.js";import"./floating-ui.react-DD89AqSX.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-C4_xw0Qz.js";import"./_getPrototype-0ulQvO4z.js";import"./index-Blf2GdN6.js";import"./index-CXaN8JhO.js";import"./toString-Dkf6_Dxj.js";import"./chainedFunction-BxZSneMW.js";import"./index-TU9pDyqH.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-DodG7NJv.js";const We=async a=>{var t,s;try{const r=await P.get(`/project/${a}/invoice`);if(!r.data)throw new Error("No data received from server");return r.data.data}catch(r){throw console.error("API Error:",r),new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to fetch invoice data")}},Fe=async a=>{try{return console.log("Downloading invoice PDF for project:",a),(await P.get(`/project/${a}/invoice/pdf`,{responseType:"blob"})).data}catch(t){throw console.error("Error downloading invoice PDF:",t),t}},He=async(a,t)=>{try{return(await P.put(`/project/${a}/grn-number`,{grnNumber:t})).data}catch(s){throw console.error("Error adding GRN number:",s),s}},Be=async(a,t)=>{try{return(await P.patch(`/project/${a}/work-start-date`,{workStartDate:new Date(t).toISOString()})).data}catch(s){throw console.error("Error setting work start date:",s),s}},Ge=async(a,t)=>{try{return(await P.patch(`/project/${a}/work-end-date`,{workEndDate:new Date(t).toISOString()})).data}catch(s){throw console.error("Error setting work end date:",s),s}},Oe=async a=>{try{return(await P.get(`/project/${a}/work-duration`)).data}catch(t){throw console.error("Error getting work duration:",t),t}},{Tr:F,Th:Le,Td:T,THead:qe,TBody:Ue,TFoot:Ve}=de,ne=({label:a,value:t})=>e.jsxs(F,{children:[e.jsx(T,{className:"!border-t-0",colSpan:3}),e.jsx(T,{className:"font-semibold !border-t-0 text-right",children:a}),e.jsx(T,{className:"!py-3 !border-t-0",children:e.jsx(H,{amount:t})})]}),H=({amount:a=0})=>e.jsx(oe,{displayType:"text",value:(Math.round(a*100)/100).toFixed(2),suffix:" AED",thousandSeparator:!0}),I=Se(),$e=[I.accessor("sno",{header:"Item",cell:a=>a.getValue()}),I.accessor("description",{header:"Description"}),I.accessor("qty",{header:"Qty"}),I.accessor("unitPrice",{header:"Unit Price (AED)",cell:a=>e.jsx(H,{amount:a.getValue()})}),I.accessor("total",{header:"Total (AED)",cell:a=>e.jsx(H,{amount:a.getValue()})})],ze=({products:a=[],summary:t={}})=>{const s=De({data:a,columns:$e,getCoreRowModel:Ee()});return e.jsxs(de,{children:[e.jsx(qe,{children:s.getHeaderGroups().map(r=>e.jsx(F,{children:r.headers.map(l=>e.jsx(Le,{colSpan:l.colSpan,children:X(l.column.columnDef.header,l.getContext())},l.id))},r.id))}),e.jsx(Ue,{children:s.getRowModel().rows.map(r=>e.jsx(F,{children:r.getVisibleCells().map(l=>e.jsx(T,{children:X(l.column.columnDef.cell,l.getContext())},l.id))},r.id))}),e.jsxs(Ve,{children:[e.jsx(ne,{label:"Amount (AED)",value:t.amount}),e.jsx(ne,{label:"VAT 5% (AED)",value:t.vat}),e.jsxs(F,{children:[e.jsx(T,{className:"!border-t-0",colSpan:3}),e.jsx(T,{className:"font-semibold text-base text-right",children:"Total Receivable (AED)"}),e.jsx(T,{className:"font-semibold text-base !py-3",children:e.jsx(H,{amount:t.totalReceivable})})]})]})]})},Qe=({isOpen:a,onClose:t,onSave:s,projectId:r,refetch:l,number:x})=>{const[c,b]=o.useState(x||""),[f,u]=o.useState(""),[i,N]=o.useState(!1);o.useEffect(()=>{b(x||""),u("")},[a,x]);const v=R=>{b(R.target.value),f&&u("")},S=async R=>{var n,A,m;if(R.preventDefault(),!c.trim()){u("GRN number is required");return}if(x&&c===x){g.push(e.jsx(h,{title:"Info",type:"info",duration:2500,children:"GRN number hasn't changed"}),{placement:"top-center"}),t();return}try{N(!0),u(""),await He(r,c),l(),s==null||s(c),g.push(e.jsxs(h,{title:"Success",type:"success",duration:2500,children:[x?"GRN number updated":"GRN number saved"," successfully"]}),{placement:"top-center"}),t()}catch(y){const Y=((A=(n=y==null?void 0:y.response)==null?void 0:n.data)==null?void 0:A.message)||((m=y==null?void 0:y.data)==null?void 0:m.message)||y.message||"Failed to save GRN number";u(Y),g.push(e.jsx(h,{title:"Error",type:"danger",duration:2500,children:Y}),{placement:"top-center"})}finally{N(!1)}};return e.jsxs(L,{isOpen:a,onClose:t,onRequestClose:t,width:500,children:[e.jsx("h5",{className:"mb-4",children:x?"Update GRN Number":"Add GRN Number"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"grnNumber",className:"block mb-2",children:["GRN Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ke,{id:"grnNumber",placeholder:"Enter GRN number",value:c,onChange:v,disabled:i}),f&&e.jsx("p",{className:"mt-1 text-red-500",children:f})]}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(j,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:t,disabled:i,children:"Cancel"}),e.jsx(j,{variant:"solid",onClick:S,loading:i,children:i?"Processing...":x?"Update":"Save"})]})]})},Ze=({isOpen:a,onClose:t,projectId:s,startDate:r,refetch:l})=>{const[x,c]=o.useState(!1),[b,f]=o.useState(r?E(r).format("YYYY-MM-DD"):""),u=async()=>{var i,N;if(!s){g.push(e.jsx(h,{title:"Error",type:"danger",children:"Project ID is required"}));return}if(!b){g.push(e.jsx(h,{title:"Error",type:"danger",children:"Please select a start date"}));return}c(!0);try{await Be(s,b),g.push(e.jsx(h,{title:"Success",type:"success",children:"Work start date set successfully"})),l(),t()}catch(v){console.error("Error setting work start date:",v);const S=((N=(i=v.response)==null?void 0:i.data)==null?void 0:N.message)||"Failed to set work start date";g.push(e.jsx(h,{title:"Error",type:"danger",children:S}))}finally{c(!1)}};return e.jsx(L,{isOpen:a,onClose:t,onRequestClose:t,width:400,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Set Work Start Date"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Work Start Date"}),e.jsx("input",{type:"date",value:b,onChange:i=>f(i.target.value),className:"w-full p-2 border border-gray-300 rounded-md",max:E().format("YYYY-MM-DD")})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(j,{onClick:t,variant:"plain",children:"Cancel"}),e.jsx(j,{loading:x,onClick:u,variant:"solid",className:"bg-blue-500 hover:bg-blue-600",children:"Set Start Date"})]})]})})},_e=({isOpen:a,onClose:t,projectId:s,endDate:r,refetch:l})=>{const[x,c]=o.useState(!1),[b,f]=o.useState(r?E(r).format("YYYY-MM-DD"):""),u=async()=>{var i,N;if(!s){g.push(e.jsx(h,{title:"Error",type:"danger",children:"Project ID is required"}));return}if(!b){g.push(e.jsx(h,{title:"Error",type:"danger",children:"Please select an end date"}));return}c(!0);try{await Ge(s,b),g.push(e.jsx(h,{title:"Success",type:"success",children:"Work end date set successfully"})),l(),t()}catch(v){console.error("Error setting work end date:",v);const S=((N=(i=v.response)==null?void 0:i.data)==null?void 0:N.message)||"Failed to set work end date";g.push(e.jsx(h,{title:"Error",type:"danger",children:S}))}finally{c(!1)}};return e.jsx(L,{isOpen:a,onClose:t,onRequestClose:t,width:400,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Set Work End Date"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Work End Date"}),e.jsx("input",{type:"date",value:b,onChange:i=>f(i.target.value),className:"w-full p-2 border border-gray-300 rounded-md",max:E().format("YYYY-MM-DD")})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(j,{onClick:t,variant:"plain",children:"Cancel"}),e.jsx(j,{loading:x,onClick:u,variant:"solid",className:"bg-green-500 hover:bg-green-600",children:"Set End Date"})]})]})})},Je=()=>{we();const a=ue(d=>d.theme.mode),[t,s]=o.useState(!0),[r,l]=o.useState(null),[x,c]=o.useState(null),[b,f]=o.useState(!1),[u,i]=o.useState(!1),[N,v]=o.useState(!1),[S,R]=o.useState(!1),[n,A]=o.useState(null),{projectId:m}=ye(),y=async()=>{try{if(s(!0),c(null),!m)throw new Error("Project ID is required");const d=await We(m);if(!d||!d.invoiceNumber||!d.vendor||!d.vendee||!Array.isArray(d.products))throw new Error("Invalid invoice data received from server");l(d)}catch(d){console.error("Error fetching invoice data:",d),c(d instanceof Error?d.message:"Failed to load invoice data")}finally{s(!1)}},Y=async()=>{if(m)try{const d=await Oe(m);A(d.data)}catch(d){console.error("Error fetching work duration:",d)}};o.useEffect(()=>{y()},[m]),o.useEffect(()=>{r&&Y()},[r]);const ie=async()=>{var d;if(!m){g.push(e.jsx(h,{title:"Error",type:"danger",children:"Project ID is required"}));return}f(!0),c(null);try{const M=await Fe(m),W=window.URL.createObjectURL(new Blob([M])),D=document.createElement("a");D.href=W,D.setAttribute("download",`invoice_${(r==null?void 0:r.invoiceNumber)||m}.pdf`),document.body.appendChild(D),D.click(),(d=D.parentNode)==null||d.removeChild(D),window.URL.revokeObjectURL(W),g.push(e.jsx(h,{title:"Success",type:"success",children:"PDF downloaded successfully"}))}catch(M){console.error("PDF download error:",M),c("Failed to download PDF"),g.push(e.jsx(h,{title:"Error",type:"danger",children:"Failed to download PDF"}))}finally{f(!1)}},le=()=>{i(!0)},ce=()=>{i(!1)},xe=()=>{v(!0)},me=()=>{R(!0)},pe=()=>{v(!1)},ge=()=>{R(!1)},he=d=>{if(d===0)return"Zero AED only";const M=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],W=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],D=["","Ten","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],q=["","Thousand","Million","Billion","Trillion"],U=p=>{if(p===0)return"";let w=[];const _=Math.floor(p/100);_>0&&w.push(M[_]+" Hundred");const C=p%100;if(C>0)if(C<10)w.push(M[C]);else if(C<20)w.push(W[C-10]);else{const be=Math.floor(C/10),J=C%10;w.push(D[be]),J>0&&w.push(M[J])}return w.join(" ")},V=Math.floor(d).toString(),G=[];for(let p=V.length;p>0;p-=3)G.push(parseInt(V.substring(Math.max(0,p-3),p),10));let $=[];for(let p=0;p<G.length;p++){const w=U(G[p]);w&&$.unshift(w+(q[p]?" "+q[p]:""))}const z=Math.round((d-Math.floor(d))*100);let Q="";z>0&&(Q=" and "+U(z)+" Fils");const Z=$.join(" ")+Q+" AED only";return Z.charAt(0).toUpperCase()+Z.slice(1).toLowerCase()},B=(n==null?void 0:n.workStartDate)&&(n==null?void 0:n.workEndDate);return x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs(k,{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"text-red-500 mb-4",children:[e.jsx(ee,{className:"text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading Invoice"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x})]}),e.jsx(j,{className:"mt-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",onClick:y,children:"Retry"})]})})}):r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900 print:bg-white",children:[e.jsx(K,{loading:t,children:e.jsxs("div",{className:"container mx-auto p-6 print:p-0",children:[e.jsx("div",{className:"mb-8 print:mb-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-6 print:mb-4",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg print:bg-purple-500",children:e.jsx(Me,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white print:text-2xl",children:"Invoice Details"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 print:text-sm",children:"View and manage invoice information"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8 mb-8 print:grid-cols-3 print:gap-4 print:mb-4",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsxs(k,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden print:rounded-none print:shadow-none print:border print:border-gray-300",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700 print:p-4 print:bg-blue-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg print:bg-blue-500",children:e.jsx(re,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white print:text-lg",children:"Company Information"})]})}),e.jsxs("div",{className:"p-6 print:p-4",children:[e.jsx(fe,{className:"mb-6 print:mb-4",mode:a}),e.jsx("div",{className:"space-y-4 print:space-y-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800 print:p-2 print:rounded-none print:border print:border-gray-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Invoice Number"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.invoiceNumber})]})]})})})]})]})}),e.jsx("div",{className:"xl:col-span-2",children:e.jsxs(k,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden print:rounded-none print:shadow-none print:border print:border-gray-300",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700 print:p-4 print:bg-purple-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg print:bg-purple-500",children:e.jsx(ee,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white print:text-lg",children:["Invoice ",r.invoiceNumber]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 print:text-xs",children:"Invoice Details"})]})]}),e.jsx(ve,{content:"Active",className:"px-3 py-1 text-xs font-bold",innerClass:"bg-emerald-500 text-white shadow-lg"})]})}),e.jsx("div",{className:"p-6 print:p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 print:gap-4",children:[e.jsxs("div",{className:"space-y-4 print:space-y-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800 print:p-2 print:rounded-none print:border print:border-gray-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"text-xl text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Date"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:E(r.date).format("dddd, DD MMMM, YYYY")})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-4 rounded-xl border border-orange-200 dark:border-orange-800 print:p-2 print:rounded-none print:border print:border-gray-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{className:"text-xl text-orange-600 dark:text-orange-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Order Number"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.orderNumber})]})]})})]}),e.jsxs("div",{className:"space-y-4 print:space-y-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-indigo-200 dark:border-indigo-800 print:p-2 print:rounded-none print:border print:border-gray-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{size:40,shape:"circle",className:"border-2 border-white shadow-lg print:border print:border-gray-300"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Prepared By"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:[r.preparedBy.firstName," ",r.preparedBy.lastName]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800 print:p-2 print:rounded-none print:border print:border-gray-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Total Amount"}),e.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400 print:text-lg",children:e.jsx(oe,{displayType:"text",value:r.summary.totalReceivable,prefix:"AED ",thousandSeparator:!0,decimalScale:2})})]})]})})]})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 print:grid-cols-2 print:gap-4 print:mb-4",children:[e.jsxs(k,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden print:rounded-none print:shadow-none print:border print:border-gray-300",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700 print:p-4 print:bg-green-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg print:bg-green-500",children:e.jsx(Re,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white print:text-lg",children:"Vendee Information"})]})}),e.jsx("div",{className:"p-6 print:p-4",children:e.jsxs("div",{className:"space-y-3 print:space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Name"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendee.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Address"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendee.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"PO Box"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendee.poBox})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Phone"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendee.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"TRN"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendee.trn})]})]})})]}),e.jsxs(k,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden print:rounded-none print:shadow-none print:border print:border-gray-300",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700 print:p-4 print:bg-blue-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg print:bg-blue-500",children:e.jsx(re,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white print:text-lg",children:"Vendor Information"})]})}),e.jsx("div",{className:"p-6 print:p-4",children:e.jsxs("div",{className:"space-y-3 print:space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Name"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendor.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Address"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendor.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"PO Box"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendor.poBox})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Phone"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendor.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"TRN"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.vendor.trn})]})]})})]})]}),e.jsx("div",{className:"mb-8 print:mb-4",children:e.jsxs(k,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden print:rounded-none print:shadow-none print:border print:border-gray-300",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700 print:p-4 print:bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-gray-500 to-slate-600 rounded-lg print:bg-gray-500",children:e.jsx(Ye,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white print:text-lg",children:"Items & Pricing"})]})}),e.jsx("div",{className:"p-6 print:p-4",children:e.jsx(ze,{products:r.products,summary:r.summary})})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-8 mb-8 print:mb-4",children:e.jsxs(k,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden print:rounded-none print:shadow-none print:border print:border-gray-300",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700 print:p-4 print:bg-purple-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg print:bg-purple-500",children:e.jsx(ae,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white print:text-lg",children:"Work Duration"})]})}),e.jsxs("div",{className:"p-6 print:p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 print:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800 print:p-2 print:rounded-none print:border print:border-gray-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Work Start Date"})]}),e.jsx(j,{size:"xs",variant:"plain",onClick:xe,icon:e.jsx(se,{className:"text-sm"}),className:"print:hidden",children:"Edit"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:n!=null&&n.workStartDate?E(n.workStartDate).format("DD MMMM, YYYY"):"Not set"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800 print:p-2 print:rounded-none print:border print:border-gray-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"text-xl text-green-600 dark:text-green-400"}),e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Work End Date"})]}),e.jsx(j,{size:"xs",variant:"plain",onClick:me,icon:e.jsx(se,{className:"text-sm"}),className:"print:hidden",children:"Edit"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:n!=null&&n.workEndDate?E(n.workEndDate).format("DD MMMM, YYYY"):"Not set"})]})]}),(n==null?void 0:n.durationInDays)!==null&&e.jsxs("div",{className:"mt-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-4 rounded-xl border border-amber-200 dark:border-amber-800 print:p-2 print:rounded-none print:border print:border-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"text-xl text-amber-600 dark:text-amber-400"}),e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300 print:text-sm",children:"Total Duration"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:[n==null?void 0:n.durationInDays," days"]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-8 mb-8 print:mb-4",children:e.jsxs(k,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden print:rounded-none print:shadow-none print:border print:border-gray-300",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700 print:p-4 print:bg-amber-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-lg print:bg-amber-500",children:e.jsx(Ie,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white print:text-lg",children:"Payment Information"})]})}),e.jsx("div",{className:"p-6 print:p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 print:gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2 print:text-sm",children:"Payment Terms"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:r.paymentTerms})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2 print:text-sm",children:"Amount in Words"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 print:text-sm",children:he(r.summary.totalReceivable)})]})]})})]})}),e.jsx(k,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden print:hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-lg",children:e.jsx(O,{className:"text-2xl text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Invoice Date"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:E(r.date).format("DD MMMM, YYYY")})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(j,{variant:"solid",onClick:le,icon:e.jsx(te,{}),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:"Add GRN Number"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(j,{variant:"solid",loading:b,onClick:ie,icon:e.jsx(Ae,{}),disabled:!B,className:`bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 ${B?"":"opacity-50 cursor-not-allowed"}`,children:b?"Generating PDF...":"Download Invoice"}),!B&&e.jsx("div",{className:"mt-2 text-sm text-red-500 text-center",children:"Please set both work start and end dates to download the invoice"})]})]})]})})})]})}),e.jsx(Qe,{isOpen:u,onClose:ce,projectId:m,number:r.vendee.grnNumber,refetch:y}),e.jsx(Ze,{isOpen:N,onClose:pe,projectId:m,startDate:n==null?void 0:n.workStartDate,refetch:Y}),e.jsx(_e,{isOpen:S,onClose:ge,projectId:m,endDate:n==null?void 0:n.workEndDate,refetch:Y})]}):e.jsx(K,{loading:t})},Or=()=>e.jsx(je,{className:"h-full",children:e.jsx(k,{className:"h-full",bodyClass:"h-full",children:e.jsx(Je,{})})});export{Or as default};
