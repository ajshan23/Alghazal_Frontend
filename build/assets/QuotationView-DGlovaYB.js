import{r as o,j as e,a8 as ie,u as oe,v as ne,T as _,b as U}from"./index-BqYC2zCO.js";import{a as ce,C as xe}from"./Views-B3egHxO-.js";import{C as w}from"./Card-DiA6JKLe.js";import{B as c}from"./Button-BZH25-Aw.js";import{L as me}from"./Logo-CQo4yOfo.js";import{aX as ge,aY as A,_ as he,aZ as pe,af as T,ay as ue,a0 as R,aa as be,a1 as $,a2 as ye,a5 as Y,a6 as je,a_ as M,ad as z,a9 as fe,a7 as Ne,Y as ve}from"./index-CErL3g3x.js";import{u as ke}from"./useThemeClass-CB8d6Ww5.js";import{g as F,a as we,r as Ce,b as Se,s as Ee,d as Ie}from"./api-B84bB5PQ.js";import"./Alert-Praf8Fi9.js";import{A as De}from"./index-BhxlP8yV.js";import{B}from"./Badge-CrbEpOhk.js";import"./index-Bm5J6gtn.js";import"./index-o6PoulbO.js";import{D as q}from"./Dialog-C85wTnEL.js";import"./Drawer-3BaRt1RV.js";import"./index-BNWCw_o_.js";import{F as L,a as V}from"./FormItem-FeS_vrRF.js";import"./useUniqueId-BmsTzdR7.js";import{I as O}from"./Input-CF7OdvAt.js";import{U as W}from"./Upload-B1V-WMlx.js";import"./index-fwAOcRNC.js";import{t as v,N as k}from"./toast-BNCR3rph.js";import"./index-BkSrbwb3.js";import"./ScrollBar-bvGQZvnP.js";import"./Select-3fyDv9Rf.js";import"./Tag-DOC98LxQ.js";import{N as Pe}from"./react-number-format.es-BGUL9v2_.js";import{D as Ue}from"./Dirham-thumb-GsAmv-hi.js";import"./context-CKHslMnf.js";import"./StatusIcon-CrxJz663.js";import"./CloseButton-L6WjsDsk.js";import"./proxy-DBs-aCG0.js";import"./floating-ui.react-DBGHfBho.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-BLbmKy6n.js";import"./_getPrototype-_N1fRqzo.js";import"./index-Z1Egzvm9.js";import"./index-DtRKDKi1.js";import"./toString-sucKyfO-.js";import"./chainedFunction-BxZSneMW.js";import"./index-BnTamqJo.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-7CwaeXnJ.js";const Fe=({isOpen:x,onClose:g,onUpload:u,quotationId:a})=>{const[t,b]=o.useState([]),[j,i]=o.useState([]),f=o.useRef(null),h=l=>{if(l&&l.length>0){const d=Array.from(l).map(r=>({id:`${r.name}-${Date.now()}`,name:r.name,type:r.type,size:r.size,file:r}));return b(r=>[...r,...d]),i(r=>[...r,...d.map(()=>"")]),!0}return!0},C=(l,d)=>{i(r=>{const m=[...r];return m[l]=d,m})},S=l=>{b(d=>d.filter((r,m)=>m!==l)),i(d=>d.filter((r,m)=>m!==l))},I=()=>{const l=t.map(d=>d.file);u(l,j),b([]),i([]),g()},E=t.length>0&&j.every(l=>l==null?void 0:l.trim());return e.jsxs(q,{isOpen:x,onClose:g,onRequestClose:g,width:800,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{children:"Upload Quotation Images"}),e.jsx(c,{shape:"circle",variant:"plain",icon:e.jsx(ge,{}),onClick:g})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(W,{ref:f,beforeUpload:h,showList:!1,multiple:!0,accept:"image/*",children:e.jsx(c,{variant:"solid",icon:e.jsx(A,{}),type:"button",children:"Select Images"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Upload images for quotation (JPEG, PNG, GIF supported)"})]}),t.length>0&&e.jsxs("div",{className:"max-h-96 overflow-y-auto border rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:[t.length," image",t.length>1?"s":""," selected"]}),e.jsx(c,{size:"xs",variant:"plain",onClick:()=>{b([]),i([])},className:"text-red-500 hover:text-red-600",children:"Clear All"})]}),t.map((l,d)=>e.jsx("div",{className:"mb-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 last:mb-0",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-600 rounded-lg overflow-hidden flex-shrink-0",children:l.type.startsWith("image/")&&e.jsx("img",{src:URL.createObjectURL(l.file),alt:l.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(L,{layout:"vertical",size:"sm",children:e.jsx(V,{label:"Title *",className:"mb-3",asterisk:!0,children:e.jsx(O,{value:j[d]||"",onChange:r=>C(d,r.target.value),placeholder:"Enter image title",required:!0,size:"sm"})})})}),e.jsx("div",{className:"flex flex-col gap-2 flex-shrink-0",children:e.jsx(c,{shape:"circle",variant:"plain",size:"sm",icon:e.jsx(he,{}),onClick:()=>S(d),className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",title:"Remove image"})})]})},l.id))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx(c,{variant:"plain",onClick:g,children:"Cancel"}),e.jsxs(c,{variant:"solid",onClick:I,disabled:!E,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:["Upload ",t.length>0?`${t.length} Image${t.length>1?"s":""}`:"Images"]})]})]})},Re=({isOpen:x,onClose:g,onUpdate:u,onReplace:a,image:t})=>{const[b,j]=o.useState(""),[i,f]=o.useState(null),[h,C]=o.useState(!1);o.useEffect(()=>{t&&(j(t.title),f(null))},[t]);const S=r=>{if(r&&r.length>0){const m=r[0];return m.type.startsWith("image/")?(f(m),!0):(alert("Please select an image file"),!1)}return!1},I=async()=>{if(t){if(!b.trim()){alert("Please enter a title for the image");return}C(!0);try{await u(t._id,{title:b.trim()}),i&&await a(t._id,i),g()}catch(r){console.error("Error updating image:",r),alert("Failed to update image. Please try again.")}finally{C(!1)}}},E=()=>{f(null)},l=()=>{f(null),j((t==null?void 0:t.title)||""),g()};if(!t)return null;const d=i?URL.createObjectURL(i):t.imageUrl;return e.jsxs(q,{isOpen:x,onClose:l,onRequestClose:l,width:800,height:600,style:{maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},contentClassName:"flex flex-col h-full",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200 dark:border-gray-600 flex-shrink-0",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Image"})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-6",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(pe,{className:"text-lg text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Image Preview"})]}),e.jsx("div",{className:"aspect-square bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-600 overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:d,alt:b,className:"w-full h-full object-contain max-h-64"})}),i&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["New image selected: ",i.name]})})]})}),e.jsxs("div",{className:"lg:w-1/2",children:[e.jsx(L,{layout:"vertical",size:"sm",children:e.jsx(V,{label:"Title *",className:"mb-6",asterisk:!0,children:e.jsx(O,{value:b,onChange:r=>j(r.target.value),placeholder:"Enter image title",required:!0})})}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(A,{className:"text-lg text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Replace Image"})]}),i?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 truncate",children:i.name}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[(i.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx(c,{size:"xs",variant:"plain",onClick:E,className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 ml-2",children:"Remove"})]}):e.jsxs("div",{className:"text-center p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-gray-400 dark:hover:border-gray-500 transition-colors",children:[e.jsx(W,{beforeUpload:S,showList:!1,accept:"image/*",children:e.jsx(c,{variant:"twoTone",icon:e.jsx(A,{}),type:"button",size:"sm",className:"mb-2",children:"Select New Image"})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choose a new image file to replace the current one"})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-600 mt-auto flex-shrink-0",children:[e.jsx(c,{variant:"plain",onClick:l,disabled:h,children:"Cancel"}),e.jsx(c,{variant:"solid",onClick:I,loading:h,disabled:!b.trim(),className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:h?"Updating...":"Update Image"})]})]})},Me=({isOpen:x,onClose:g,onSend:u,loading:a=!1})=>{const[t,b]=o.useState([]),[j,i]=o.useState(""),[f,h]=o.useState(""),C=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.trim()),S=()=>{const r=j.trim();if(r){if(!C(r)){h("Please enter a valid email address");return}if(t.includes(r)){h("This email is already added");return}b([...t,r]),i(""),h("")}},I=r=>{b(t.filter(m=>m!==r))},E=r=>{r.key==="Enter"&&(r.preventDefault(),S())},l=()=>{u(t),d()},d=()=>{b([]),i(""),h(""),g()};return e.jsx(q,{isOpen:x,onClose:d,width:600,children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-lg",children:e.jsx(T,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Send Quotation Email"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add CC recipients (optional)"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"CC Email Addresses"}),t.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:t.map((r,m)=>e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-full text-sm font-medium shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("span",{children:r}),e.jsx("button",{onClick:()=>I(r),className:"hover:bg-white/20 rounded-full p-0.5 transition-colors",type:"button",children:e.jsx(ue,{className:"text-sm"})})]},m))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{type:"email",placeholder:"Enter email address and press Enter",value:j,onChange:r=>{i(r.target.value),h("")},onKeyDown:E,className:"flex-1"}),e.jsx(c,{variant:"solid",onClick:S,className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:"Add"})]}),f&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:f}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Press Enter or click Add to add an email address"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Note:"})," The quotation will be sent to the client's email address. CC recipients will receive a copy of the email with the quotation PDF attached."]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(c,{variant:"plain",onClick:d,disabled:a,children:"Cancel"}),e.jsx(c,{variant:"solid",loading:a,onClick:l,icon:e.jsx(T,{}),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:a?"Sending...":t.length>0?`Send to ${t.length} CC`:"Send Email"})]})]})})},D=({value:x})=>e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("img",{src:Ue,alt:"Dirham",className:"w-3.5 h-3.5 inline-block"}),e.jsx(Pe,{displayType:"text",value:x,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0})]}),Ae=({products:x,summary:g,vatPercentage:u})=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"UOM"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:x.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:a.sno}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:a.description}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:a.uom}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300 text-right",children:a.qty}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300 text-right",children:e.jsx(D,{value:a.unitPrice})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300 text-right",children:e.jsx(D,{value:a.total})})]},a.id))}),e.jsxs("tfoot",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:5,className:"px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-300 text-right",children:"Total"}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-300 text-right",children:e.jsx(D,{value:g.subTotal})})]}),e.jsxs("tr",{children:[e.jsxs("td",{colSpan:5,className:"px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-300 text-right",children:["VAT ",u,"%"]}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-300 text-right",children:e.jsx(D,{value:g.vat})})]}),e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-600",children:[e.jsx("td",{colSpan:5,className:"px-4 py-3 text-sm font-bold text-gray-900 dark:text-white text-right",children:"Net Amount"}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-900 dark:text-white text-right",children:e.jsx(D,{value:g.netAmount})})]})]})]})}),Te=()=>{ke();const{projectId:x}=ie(),[g,u]=o.useState(!0),[a,t]=o.useState(null),[b,j]=o.useState(!1),i=oe(s=>s.theme.mode),[f,h]=o.useState(null),[C,S]=o.useState(!1),[I,E]=o.useState(!1),[l,d]=o.useState(!1),[r,m]=o.useState(!1),[G,Q]=o.useState(null),X=ne(),[H,J]=o.useState(null);o.useEffect(()=>{(async()=>{try{if(u(!0),!x)throw new Error("Project ID is missing");const y=await F(x);console.log("from res",y.data),t(y.data)}catch(y){console.error("Error fetching quotation:",y),h("Failed to load quotation data")}finally{u(!1)}})();const n=JSON.parse(localStorage.getItem("user")||"{}");J(n.role)},[x]);const K=async s=>{var n,y;if(a){j(!0),h("");try{await Ee(a._id,s),v.push(e.jsx(k,{title:"Success",type:"success",children:"Quotation email sent successfully"})),m(!1)}catch(N){h("Failed to send email"),v.push(e.jsx(k,{title:"Error",type:"danger",children:((y=(n=N.response)==null?void 0:n.data)==null?void 0:y.message)||N.message||"Failed to send email"}))}finally{j(!1)}}},Z=async(s,n)=>{var y,N;if(a)try{u(!0),await we({quotationId:a._id,images:s,titles:n});const p=await F(x);t(p.data),v.push(e.jsx(k,{title:"Success",type:"success",children:"Images uploaded successfully"}))}catch(p){console.error("Error uploading images:",p),v.push(e.jsx(k,{title:"Error",type:"danger",children:((N=(y=p.response)==null?void 0:y.data)==null?void 0:N.message)||p.message||"Failed to upload images"}))}finally{u(!1)}},ee=s=>{Q(s),d(!0)},ae=async(s,n)=>{var y,N;if(a)try{u(!0),await Se(a._id,s,n);const p=await F(x);t(p.data),v.push(e.jsx(k,{title:"Success",type:"success",children:"Image updated successfully"}))}catch(p){console.error("Error updating image:",p),v.push(e.jsx(k,{title:"Error",type:"danger",children:((N=(y=p.response)==null?void 0:y.data)==null?void 0:N.message)||p.message||"Failed to update image"}))}finally{u(!1)}},re=async(s,n)=>{var y,N;if(a)try{u(!0),await Ce(a._id,s,n);const p=await F(x);t(p.data),v.push(e.jsx(k,{title:"Success",type:"success",children:"Image replaced successfully"}))}catch(p){console.error("Error replacing image:",p),v.push(e.jsx(k,{title:"Error",type:"danger",children:((N=(y=p.response)==null?void 0:y.data)==null?void 0:N.message)||p.message||"Failed to replace image"}))}finally{u(!1)}},te=async()=>{if(a){S(!0),h("");try{await Ie({id:a._id,quotationNumber:a.quotationNumber,projectName:a.project.projectName,location:a.project.location}),v.push(e.jsx(k,{title:"Success",type:"success",children:"PDF downloaded successfully"}))}catch(s){h("Failed to download PDF"),v.push(e.jsx(k,{title:"Error",type:"danger",children:s.message||"Failed to download PDF"}))}finally{S(!1)}}},se=()=>{!a||!x||X(`${ce}/quotation-edit/${x}/${a._id}`,{state:{estimationId:a.estimation}})};if(f)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs(w,{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"text-red-500 mb-4",children:[e.jsx(R,{className:"text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading Quotation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:f})]}),e.jsx(c,{className:"mt-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",onClick:()=>window.location.reload(),children:"Retry"})]})})});if(!a)return e.jsx(_,{loading:g});const P=U().isBefore(U(a.validUntil)),le=a.items.map((s,n)=>({id:s._id||`item-${n}`,sno:n+1,description:s.description,uom:s.uom,qty:s.quantity,unitPrice:s.unitPrice,total:s.totalPrice,details:{color:[],size:[]}})),de={subTotal:a.subtotal,vat:a.vatAmount,netAmount:a.netAmount};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsxs(_,{loading:g,children:[e.jsx(Fe,{isOpen:I,onClose:()=>E(!1),onUpload:Z,quotationId:a._id}),e.jsx(Re,{isOpen:l,onClose:()=>{d(!1),Q(null)},onUpdate:ae,onReplace:re,image:G}),e.jsx(Me,{isOpen:r,onClose:()=>m(!1),onSend:K,loading:b}),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg",children:e.jsx(R,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Quotation Details"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View and manage quotation information"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8 mb-8",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(be,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Company Information"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx(me,{className:"mb-6",mode:i}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Project"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.project.projectName})]})]})})})]})]})}),e.jsx("div",{className:"xl:col-span-2",children:e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg",children:e.jsx(R,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["Quotation ",a.quotationNumber]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Quotation Details"})]})]}),e.jsx(B,{content:P?"Valid":"Expired",className:"px-3 py-1 text-xs font-bold",innerClass:`${P?"bg-emerald-500":"bg-red-500"} text-white shadow-lg`})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{className:"text-xl text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Date"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:U(a.date).format("dddd, DD MMMM, YYYY")})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-4 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{className:"text-xl text-orange-600 dark:text-orange-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Valid Until"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:U(a.validUntil).format("dddd, DD MMMM, YYYY")})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-indigo-200 dark:border-indigo-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{size:40,shape:"circle",className:"border-2 border-white shadow-lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Prepared By"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a.preparedBy.firstName," ",a.preparedBy.lastName]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Net Amount"}),e.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:e.jsx(D,{value:a.netAmount})})]})]})})]})]})})]})})]}),a.images&&a.images.length>0&&e.jsxs(w,{className:"mb-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-blue-600 rounded-lg",children:e.jsx(M,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Quotation Images"})]}),e.jsx(c,{variant:"solid",icon:e.jsx(M,{}),onClick:()=>E(!0),className:"bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:"Add Images"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.images.map((s,n)=>e.jsxs("div",{className:"group bg-white dark:bg-gray-700 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-600 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsxs("div",{className:"aspect-video overflow-hidden relative",children:[e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),H!=="engineer"&&e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx(c,{size:"xs",variant:"solid",icon:e.jsx(z,{}),onClick:()=>ee(s),className:"bg-blue-500 hover:bg-blue-600 text-white shadow-lg",children:"Edit"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 text-center",children:s.title})})]},`image-${n}`))})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-gray-500 to-slate-600 rounded-lg",children:e.jsx(fe,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Items & Pricing"})]})}),e.jsx("div",{className:"p-6",children:e.jsx(Ae,{products:le,summary:de,vatPercentage:a.vatPercentage})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.scopeOfWork&&a.scopeOfWork.length>0&&e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg",children:e.jsx(Ne,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Scope of Work"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("ul",{className:"space-y-3",children:a.scopeOfWork.map((s,n)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s})]},`scope-${n}`))})})]}),e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-lg",children:e.jsx($,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Terms & Conditions"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("ol",{className:"space-y-3",children:a.termsAndConditions.map((s,n)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-gradient-to-r from-amber-500 to-orange-600 text-white text-xs font-bold rounded-full flex-shrink-0 mt-0.5",children:n+1}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s})]},`term-${n}`))})})]})]}),e.jsx(w,{className:"mb-8 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl shadow-xl border border-amber-200 dark:border-amber-800 overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl shadow-lg",children:e.jsx(Y,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-1",children:"Quotation Validity"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["This quotation is ",P?"valid until":"expired since"," ",U(a.validUntil).format("DD MMMM, YYYY")]})]})]}),e.jsx(B,{content:P?"Valid":"Expired",className:"px-4 py-2 text-sm font-bold",innerClass:`${P?"bg-emerald-500":"bg-red-500"} text-white shadow-lg`})]})})}),e.jsx(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"flex flex-col lg:flex-row justify-center items-center gap-4",children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsx(c,{variant:"solid",loading:C,onClick:te,icon:e.jsx(ve,{}),className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 min-w-[160px]",children:C?"Generating...":"Download PDF"}),e.jsx(c,{variant:"solid",onClick:()=>m(!0),icon:e.jsx(T,{}),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 min-w-[160px]",children:"Send Email"}),e.jsx(c,{variant:"solid",icon:e.jsx(M,{}),onClick:()=>E(!0),className:"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 min-w-[160px]",children:"Add Images"}),H!=="engineer"&&e.jsx(c,{variant:"solid",icon:e.jsx(z,{}),onClick:se,className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 min-w-[160px]",children:"Edit Quotation"})]})})})})]})]})})},Ea=()=>e.jsx(xe,{className:"h-full",children:e.jsx(w,{className:"h-full",bodyClass:"h-full",children:e.jsx(Te,{})})});export{Ea as default};
