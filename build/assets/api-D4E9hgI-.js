import{ab as c}from"./index-cbxZr22l.js";const f=async()=>{try{return(await c.get("/user")).data}catch(r){throw console.error("Error fetching user:",r),r}},E=async(r,e=1,t=30)=>{try{return(await c.get("/shops",{params:{search:r||void 0,page:e,limit:t}})).data}catch(o){throw console.error("Error fetching shops:",o),o}},x=async(r,e=1,t=30)=>{try{return(await c.get("/categories",{params:{search:r||void 0,page:e,limit:t}})).data}catch(o){throw console.error("Error fetching categories:",o),o}},N=async(r,e=1,t=30)=>{try{return(await c.get("/vehicles",{params:{search:r||void 0,page:e,limit:t}})).data}catch(o){throw console.error("Error fetching categories:",o),o}},S=async({page:r,limit:e,search:t,billType:o,month:d,year:m,startDate:y,endDate:i,category:a,shop:s,vehicle:p,paymentMethod:w,employee:h})=>{try{return(await c.get("/bills",{params:{page:r,limit:e,search:t,billType:o,month:d,year:m,startDate:y,endDate:i,category:a,shop:s,vehicle:p,paymentMethod:w,employee:h}})).data}catch(n){throw console.error("Error fetching bills:",n),n}},v=async r=>{try{console.log("FormData contents:");for(let[t,o]of r.entries())console.log(t,o);return await c.post("/bills/",r,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw console.error("Error adding bill:",e),e}},R=async(r,e)=>{try{console.log("Edit FormData contents:");for(let[o,d]of e.entries())console.log(o,d);return await c.put(`/bills/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){throw console.error("Error editing bill:",t),t}},D=async r=>{try{const e=await c.get(`/bills/${r}`);return{...e.data,attachments:Array.isArray(e.data.attachments)?e.data.attachments:e.data.attachments?[e.data.attachments]:[],category:e.data.category||{_id:"",name:""},shop:e.data.shop||{_id:"",shopName:""},billDate:e.data.billDate||new Date().toISOString().split("T")[0],amount:Number(e.data.amount)||0,invoiceNo:e.data.invoiceNo||"",remarks:e.data.remarks||"",paymentMethod:e.data.paymentMethod||""}}catch(e){throw console.error("Error fetching bill:",e),e}},k=async r=>{try{return await c.delete(`/bills/${r}`)}catch(e){throw console.error("Error deleting bill:",e),e}},I=async({page:r,limit:e,search:t,billType:o,month:d,year:m,startDate:y,endDate:i,category:a,shop:s,vehicle:p,paymentMethod:w})=>{var h;try{const n={};t&&(n.search=t),o&&(n.billType=o),d&&(n.month=d),m&&(n.year=m),y&&(n.startDate=y),i&&(n.endDate=i),a&&(n.category=a),s&&(n.shop=s),p&&(n.vehicle=p),w&&(n.paymentMethod=w),console.log("Export params:",n);const l=await c.get("/bills/export/excel",{params:n,responseType:"blob"});if(console.log("Export response:",l),!l.data)throw new Error("No data received from server");if(l.data.type==="application/json"){const u=await l.data.text(),b=JSON.parse(u);throw new Error(b.message||"Export failed")}return l.data}catch(n){console.error("Error exporting bills:",n);let l="Failed to export bills";if((h=n==null?void 0:n.response)!=null&&h.data)if(n.response.data instanceof Blob)try{const u=await n.response.data.text();l=JSON.parse(u).message||l}catch{l="Export failed - server error"}else l=n.response.data.message||l;else n instanceof Error?l=n.message:typeof n=="string"&&(l=n);throw new Error(l)}},O=async({page:r,limit:e,search:t,reportType:o,month:d,year:m,startDate:y,endDate:i,category:a,shop:s})=>{try{return(await c.get("/bank",{params:{page:r,limit:e,search:t,reportType:o,month:d,year:m,startDate:y,endDate:i,category:a,shop:s}})).data}catch(p){throw console.error("Error fetching reports:",p),p}},P=async r=>{try{return await c.post("/bank/",r,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw console.error("Error adding Aadib report:",e),e}},j=async(r,e)=>{try{return await c.put(`/bank/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){throw console.error("Error editing Aadib report:",t),t}},$=async r=>{try{const e=await c.get(`/bank/${r}`);return{...e.data,reportDate:e.data.reportDate||new Date().toISOString().split("T")[0],amount:Number(e.data.amount)||0,category:e.data.category||{_id:"",name:""},shop:e.data.shop||{_id:"",shopName:""},remarks:e.data.remarks||""}}catch(e){throw console.error("Error fetching Aadib report:",e),e}},C=async r=>{try{return await c.delete(`/bank/${r}`)}catch(e){throw console.error("Error deleting Aadib report:",e),e}},L=async({search:r,reportType:e,month:t,year:o,startDate:d,endDate:m,category:y,shop:i,employee:a})=>{try{const s={search:r,reportType:e,month:t,year:o,startDate:d?new Date(d).toISOString():void 0,endDate:m?new Date(m).toISOString():void 0,category:y,shop:i,employee:a};Object.keys(s).forEach(l=>s[l]===void 0&&delete s[l]);const p=await c.get("/bank/export/excel",{params:s,responseType:"blob"});if(!p.data)throw new Error("No data received from server");const w=`${e||"Report"}_${new Date().toISOString().slice(0,10)}.xlsx`,h=window.URL.createObjectURL(new Blob([p.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),n=document.createElement("a");return n.href=h,n.setAttribute("download",w),document.body.appendChild(n),n.click(),setTimeout(()=>{document.body.removeChild(n),window.URL.revokeObjectURL(h)},100),!0}catch(s){console.error("Error exporting bills:",s);let p="Failed to export bills";throw s instanceof Error?p=s.message:typeof s=="string"&&(p=s),new Error(p)}},T=async({page:r,limit:e,search:t,month:o,year:d,startDate:m,endDate:y})=>{try{return(await c.get("/project-profit",{params:{page:r,limit:e,search:t,month:o,year:d,startDate:m,endDate:y}})).data}catch(i){throw console.error("Error fetching reports:",i),i}},A=async r=>{try{return await c.post("/project-profit/",r,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw console.error("Error adding Aadib report:",e),e}},B=async(r,e)=>{try{return await c.put(`/project-profit/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){throw console.error("Error editing Aadib report:",t),t}},U=async r=>{try{const e=await c.get(`/project-profit/${r}`);return{...e.data,reportDate:e.data.reportDate||new Date().toISOString().split("T")[0],amount:Number(e.data.amount)||0,category:e.data.category||{_id:"",name:""},shop:e.data.shop||{_id:"",shopName:""},remarks:e.data.remarks||""}}catch(e){throw console.error("Error fetching Aadib report:",e),e}},M=async r=>{try{return await c.delete(`/project-profit/${r}`)}catch(e){throw console.error("Error deleting Aadib report:",e),e}},_=async({search:r,month:e,year:t,startDate:o,endDate:d,page:m,limit:y})=>{try{const i={search:r,month:e,year:t,page:m,limit:y};o&&(i.startDate=new Date(o).toISOString()),d&&(i.endDate=new Date(d).toISOString()),Object.keys(i).forEach(l=>i[l]===void 0&&delete i[l]);const a=await c.get("/project-profit/export/excel",{params:i,responseType:"blob"});if(!a.data)throw new Error("No data received from server");const s=new Date,w=`profit_report_${`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}.xlsx`,h=window.URL.createObjectURL(new Blob([a.data],{type:a.headers["content-type"]||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),n=document.createElement("a");return n.href=h,n.setAttribute("download",w),document.body.appendChild(n),n.click(),setTimeout(()=>{document.body.removeChild(n),window.URL.revokeObjectURL(h)},100),!0}catch(i){console.error("Error exporting profit report:",i);let a="Failed to export profit report";throw i instanceof Error?a=i.message:typeof i=="string"?a=i:i&&typeof i=="object"&&"message"in i&&(a=i.message),new Error(a)}},F=async({page:r,limit:e,search:t,startDate:o,endDate:d,month:m,year:y,employee:i})=>{try{return(await c.get("/payroll",{params:{page:r,limit:e,search:t,startDate:o,endDate:d,month:m,year:y,employee:i}})).data}catch(a){throw console.error("Error fetching payroll reports:",a),a}},V=async r=>{try{return await c.post("/payroll/",r)}catch(e){throw console.error("Error adding payroll report:",e),e}},Y=async(r,e)=>{try{return await c.put(`/payroll/${r}`,e)}catch(t){throw console.error("Error editing payroll report:",t),t}},q=async r=>{try{const e=await c.get(`/payroll/${r}`);return{...e.data,paymentDate:e.data.paymentDate||new Date().toISOString().split("T")[0],basicSalary:Number(e.data.basicSalary)||0,allowances:Number(e.data.allowances)||0,deductions:Number(e.data.deductions)||0,netSalary:Number(e.data.netSalary)||0,status:e.data.status||"pending",employee:e.data.employee||{_id:"",name:"",designation:""}}}catch(e){throw console.error("Error fetching payroll report:",e),e}},H=async r=>{try{return await c.delete(`/payroll/${r}`)}catch(e){throw console.error("Error deleting payroll report:",e),e}},J=async({search:r,month:e,year:t,startDate:o,endDate:d,status:m,page:y,limit:i,employee:a})=>{try{const s={search:r,month:e,year:t,status:m,page:y,limit:i,employee:a};o&&(s.startDate=new Date(o).toISOString()),d&&(s.endDate=new Date(d).toISOString()),Object.keys(s).forEach(b=>s[b]===void 0&&delete s[b]);const p=await c.get("/payroll/export/excel",{params:s,responseType:"blob"});if(!p.data)throw new Error("No data received from server");const w=new Date,n=`payroll_report_${`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}-${String(w.getDate()).padStart(2,"0")}`}.xlsx`,l=window.URL.createObjectURL(new Blob([p.data],{type:p.headers["content-type"]||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),u=document.createElement("a");return u.href=l,u.setAttribute("download",n),document.body.appendChild(u),u.click(),setTimeout(()=>{document.body.removeChild(u),window.URL.revokeObjectURL(l)},100),!0}catch(s){console.error("Error exporting payroll report:",s);let p="Failed to export payroll report";throw s instanceof Error?p=s.message:typeof s=="string"?p=s:s&&typeof s=="object"&&"message"in s&&(p=s.message),new Error(p)}},z=async({page:r,limit:e,search:t,startDate:o,month:d,year:m,endDate:y,employee:i})=>{try{return(await c.get("/employee-expenses/",{params:{page:r,limit:e,search:t,month:d,year:m,employee:i,startDate:o,endDate:y}})).data}catch(a){throw console.error("Error fetching payroll reports:",a),a}},G=async r=>{try{return await c.post("/employee-expenses/",r)}catch(e){throw console.error("Error adding labour expenses report:",e),e}},K=async(r,e)=>{try{return await c.put(`/employee-expenses/${r}`,e)}catch(t){throw console.error("Error editing labour expenses report:",t),t}},Q=async r=>{try{return await c.delete(`/employee-expenses/${r}`)}catch(e){throw console.error("Error deleting labour expenses report:",e),e}},W=async r=>{var e;try{const t=await c.get(`/employee-expenses/${r}`);return{...t.data,expenses:((e=t.data.expenses)==null?void 0:e.map(o=>({employee:o.employee||"",designation:o.designation||"",country:o.country||"",basicSalary:Number(o.basicSalary)||0,allowance:Number(o.allowance)||0,total:Number(o.total)||0,twoYearSalary:Number(o.twoYearSalary)||0,visaExpenses:Number(o.visaExpenses)||0,twoYearUniform:Number(o.twoYearUniform)||0,shoes:Number(o.shoes)||0,twoYearAccommodation:Number(o.twoYearAccommodation)||0,sewaBills:Number(o.sewaBills)||0,dewaBills:Number(o.dewaBills)||0,insurance:Number(o.insurance)||0,transport:Number(o.transport)||0,water:Number(o.water)||0,thirdPartyLiabilities:Number(o.thirdPartyLiabilities)||0,fairmontCertificate:Number(o.fairmontCertificate)||0,leaveSalary:Number(o.leaveSalary)||0,ticket:Number(o.ticket)||0,gratuity:Number(o.gratuity)||0})))||[]}}catch(t){throw console.error("Error fetching labour expenses report:",t),t}},X=async({search:r,startDate:e,endDate:t,page:o,limit:d,employee:m,month:y,year:i})=>{try{const a={...r&&{search:r},...o&&{page:o},...d&&{limit:d},...y&&{month:y},...i&&{year:i},...m&&{employee:m}};e&&(a.startDate=new Date(e).toISOString()),t&&(a.endDate=new Date(t).toISOString());const s=await c.get("/employee-expenses/export/excel",{params:a,responseType:"blob"});if(!s.data)throw new Error("No data received from server");const p=new Date,h=`Employee_Expenses_Report_${[p.getFullYear(),String(p.getMonth()+1).padStart(2,"0"),String(p.getDate()).padStart(2,"0")].join("-")}.xlsx`,n=new Blob([s.data],{type:s.headers["content-type"]||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=URL.createObjectURL(n),u=document.createElement("a");return u.href=l,u.setAttribute("download",h),document.body.appendChild(u),u.click(),setTimeout(()=>{document.body.removeChild(u),URL.revokeObjectURL(l)},100),!0}catch(a){console.error("Error exporting employee expenses:",a);let s="Failed to export employee expenses report";throw a instanceof Error?s=a.message:typeof a=="string"&&(s=a),new Error(s)}},Z=async({page:r,limit:e,search:t,startDate:o,month:d,year:m,endDate:y,employee:i})=>{try{return(await c.get("/visa-expenses/",{params:{page:r,limit:e,search:t,startDate:o,endDate:y,employee:i,month:d,year:m}})).data}catch(a){throw console.error("Error fetching visa expenses reports:",a),a}},ee=async r=>{try{return await c.post("/visa-expenses/",r)}catch(e){throw console.error("Error adding visa expenses report:",e),e}},re=async(r,e)=>{try{return await c.put(`/visa-expenses/${r}`,e)}catch(t){throw console.error("Error editing visa expenses report:",t),t}},te=async r=>{try{return await c.delete(`/visa-expenses/${r}`)}catch(e){throw console.error("Error deleting visa expenses report:",e),e}},oe=async r=>{try{const e=await c.get(`/visa-expenses/${r}`);return{...e.data,employee:e.data.employee||"",iBan:e.data.iBan||"",passportNumber:e.data.passportNumber||"",passportExpireDate:e.data.passportExpireDate||"",emirateIdNumber:e.data.emirateIdNumber||"",emirateIdExpireDate:e.data.emirateIdExpireDate||"",labourCardPersonalNumber:e.data.labourCardPersonalNumber||"",workPermitNumber:e.data.workPermitNumber||"",labourExpireDate:e.data.labourExpireDate||"",offerLetterTyping:Number(e.data.offerLetterTyping)||0,labourInsurance:Number(e.data.labourInsurance)||0,labourCardPayment:Number(e.data.labourCardPayment)||0,statusChangeInOut:Number(e.data.statusChangeInOut)||0,insideEntry:Number(e.data.insideEntry)||0,medicalSharjah:Number(e.data.medicalSharjah)||0,tajweehSubmission:Number(e.data.tajweehSubmission)||0,iloeInsurance:Number(e.data.iloeInsurance)||0,healthInsurance:Number(e.data.healthInsurance)||0,emirateId:Number(e.data.emirateId)||0,residenceStamping:Number(e.data.residenceStamping)||0,srilankaCouncilHead:Number(e.data.srilankaCouncilHead)||0,upscoding:Number(e.data.upscoding)||0,labourFinePayment:Number(e.data.labourFinePayment)||0,labourCardRenewalPayment:Number(e.data.labourCardRenewalPayment)||0,servicePayment:Number(e.data.servicePayment)||0,visaStamping:Number(e.data.visaStamping)||0,twoMonthVisitingVisa:Number(e.data.twoMonthVisitingVisa)||0,finePayment:Number(e.data.finePayment)||0,entryPermitOutside:Number(e.data.entryPermitOutside)||0,complaintEmployee:Number(e.data.complaintEmployee)||0,arabicLetter:Number(e.data.arabicLetter)||0,violationCommittee:Number(e.data.violationCommittee)||0,quotaModification:Number(e.data.quotaModification)||0,others:Number(e.data.others)||0,total:Number(e.data.total)||0}}catch(e){throw console.error("Error fetching visa expenses report:",e),e}},ae=async({search:r,startDate:e,endDate:t,page:o,limit:d,employee:m,month:y,year:i})=>{try{const a={search:r,page:o,limit:d,startDate:e,endDate:t,month:y,year:i,employee:m};e&&(a.startDate=new Date(e).toISOString()),t&&(a.endDate=new Date(t).toISOString()),Object.keys(a).forEach(u=>a[u]===void 0&&delete a[u]);const s=await c.get("/visa-expenses/export/excel",{params:a,responseType:"blob"});if(!s.data)throw new Error("No data received from server");const p=new Date,h=`Visa_expense_report_${`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}-${String(p.getDate()).padStart(2,"0")}`}.xlsx`,n=window.URL.createObjectURL(new Blob([s.data],{type:s.headers["content-type"]||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),l=document.createElement("a");return l.href=n,l.setAttribute("download",h),document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),window.URL.revokeObjectURL(n)},100),!0}catch(a){console.error("Error exporting visa expense report:",a);let s="Failed to export visa expense report";throw a instanceof Error?s=a.message:typeof a=="string"?s=a:a&&typeof a=="object"&&"message"in a&&(s=a.message),new Error(s)}},se=async({year:r,month:e})=>{try{return await c.get("/reports/monthly",{params:{year:r,month:e},responseType:"blob"})}catch(t){throw console.error("Error downloading monthly report:",t),t}},ne=async({year:r})=>{try{return await c.get("/reports/yearly",{params:{year:r},responseType:"blob"})}catch(e){throw console.error("Error downloading yearly report:",e),e}},ce=async r=>{try{return(await c.get(`/employee-summary/${r}`)).data}catch(e){throw console.error("Error fetching payroll report:",e),e}};export{T as A,$ as B,j as C,P as D,U as E,B as F,A as G,W as H,K as I,G as J,ce as K,q as L,Y as M,V as N,oe as O,re as P,ee as Q,ne as a,S as b,M as c,k as d,I as e,Q as f,se as g,H as h,te as i,C as j,E as k,x as l,N as m,f as n,D as o,R as p,v as q,_ as r,X as s,J as t,ae as u,L as v,O as w,Z as x,F as y,z};
