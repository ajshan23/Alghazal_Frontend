import{$ as P,a0 as $,a1 as L,r as l,v as h,j as e,a2 as I}from"./index-BqYC2zCO.js";import{a as T}from"./SalesService-Cx9R4CSk.js";import{A as E}from"./AdaptableCard-DChiyDM1.js";import{A as R}from"./index-BhxlP8yV.js";import{D as U}from"./DataTable-CIH-lnfj.js";import{W as K,$ as z,N as F,V as _}from"./index-CErL3g3x.js";import{F as B}from"./index-BdZOEYLW.js";import{u as H}from"./useQuery-BEa8BXoD.js";import{d as O}from"./debounce-Mlq-s6K6.js";import{I as q}from"./Input-CF7OdvAt.js";import{b as M}from"./api-azDVuzCg.js";import"./Alert-Praf8Fi9.js";import"./Badge-CrbEpOhk.js";import{B as n}from"./Button-BZH25-Aw.js";import"./index-Bm5J6gtn.js";import"./Card-DiA6JKLe.js";import"./index-o6PoulbO.js";import"./Dialog-C85wTnEL.js";import"./Drawer-3BaRt1RV.js";import"./index-BNWCw_o_.js";import"./FormItem-FeS_vrRF.js";import"./useUniqueId-BmsTzdR7.js";import"./Upload-B1V-WMlx.js";import"./index-fwAOcRNC.js";import"./toast-BNCR3rph.js";import"./index-BkSrbwb3.js";import"./ScrollBar-bvGQZvnP.js";import"./Select-3fyDv9Rf.js";import"./Tag-DOC98LxQ.js";import"./floating-ui.react-DBGHfBho.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-BLbmKy6n.js";import"./proxy-DBs-aCG0.js";import"./Views-B3egHxO-.js";import"./toString-sucKyfO-.js";import"./context-CKHslMnf.js";import"./StatusIcon-CrxJz663.js";import"./CloseButton-L6WjsDsk.js";import"./_getPrototype-_N1fRqzo.js";import"./index-Z1Egzvm9.js";import"./index-DtRKDKi1.js";import"./chainedFunction-BxZSneMW.js";import"./index-BnTamqJo.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-7CwaeXnJ.js";const y="salesProductList",b=P(y+"/getProducts",async t=>(await T(t)).data),V={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},G={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:V,filterData:{name:"",category:["bags","cloths","devices","shoes","watches"],status:[0,1,2],productStatus:0}},k=$({name:`${y}/state`,initialState:G,reducers:{updateProductList:(t,r)=>{t.productList=r.payload},setTableData:(t,r)=>{t.tableData=r.payload},setFilterData:(t,r)=>{t.filterData=r.payload},toggleDeleteConfirmation:(t,r)=>{t.deleteConfirmation=r.payload},setSelectedProduct:(t,r)=>{t.selectedProduct=r.payload}},extraReducers:t=>{t.addCase(b.fulfilled,(r,s)=>{r.productList=s.payload.data,r.tableData.total=s.payload.total,r.loading=!1}).addCase(b.pending,r=>{r.loading=!0})}}),{updateProductList:Qe,setTableData:We,setFilterData:Je,toggleDeleteConfirmation:Xe,setSelectedProduct:Ye}=k.actions,Q=k.reducer,W=L({data:Q}),f={true:{label:"Active",dotClass:"bg-emerald-500",textClass:"text-emerald-500",bgClass:"bg-emerald-50 dark:bg-emerald-900/20",borderClass:"border-emerald-200 dark:border-emerald-800"},false:{label:"Inactive",dotClass:"bg-red-500",textClass:"text-red-500",bgClass:"bg-red-50 dark:bg-red-900/20",borderClass:"border-red-200 dark:border-red-800"}},J={admin:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800"},engineer:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800"},finance:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",border:"border-green-200 dark:border-green-800"},super_admin:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-200 dark:border-indigo-800"}},X=({row:t})=>{const r=h(),s=()=>{r(`/app/user-form/${t._id}`)},c=()=>{r(`/app/user-view/${t==null?void 0:t._id}`)};return e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{size:"sm",variant:"plain",icon:e.jsx(F,{}),onClick:c,className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",tooltip:"View User"}),e.jsx(n,{size:"sm",variant:"plain",icon:e.jsx(_,{}),onClick:s,className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300 transition-colors",tooltip:"Edit User"})]})},Y=({isActive:t})=>{const r=t.toString(),s=f[r]||f.false;return e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full ${s.bgClass} border ${s.borderClass}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${s.dotClass} mr-2`}),e.jsx("span",{className:`text-xs font-semibold ${s.textClass}`,children:s.label})]})},Z=({role:t})=>{const r=J[t]||{bg:"bg-gray-100 dark:bg-gray-900/30",text:"text-gray-700 dark:text-gray-300",border:"border-gray-200 dark:border-gray-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r.bg} ${r.text} border ${r.border} capitalize`,children:t.replace("_"," ")})},ee=({row:t})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{src:t.profileImage,icon:e.jsx(B,{}),alt:`${t.firstName} ${t.lastName}`,size:50,className:"border-2 border-white shadow-lg",shape:"circle"}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"font-semibold text-gray-800 dark:text-white",children:[t.firstName," ",t.lastName]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.email})]})]}),te=()=>{var u,x;const t=l.useRef(null),r=h(),[s,c]=l.useState(""),[d,m]=l.useState({page:1,limit:10}),{data:i,isLoading:j,error:p,refetch:v}=H({queryKey:["users",d.page,d.limit,s],queryFn:()=>M({page:d.page,limit:d.limit,search:s})}),N=((u=i==null?void 0:i.data)==null?void 0:u.users)||[],g=((x=i==null?void 0:i.data)==null?void 0:x.pagination)||{total:0,page:1,limit:10},C=l.useMemo(()=>O(a=>{c(a),m(o=>({...o,page:1}))},500),[]),S=a=>{C(a.target.value)},w=l.useMemo(()=>[{header:"User",accessorKey:"name",cell:a=>e.jsx(ee,{row:a.row.original})},{header:"Phone",accessorKey:"phoneNumbers",cell:a=>{var o;return e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:((o=a.row.original.phoneNumbers)==null?void 0:o[0])||"N/A"})}},{header:"Role",accessorKey:"role",cell:a=>e.jsx(Z,{role:a.row.original.role})},{header:"Status",accessorKey:"isActive",cell:a=>e.jsx(Y,{isActive:a.row.original.isActive})},{header:"Created",accessorKey:"createdAt",cell:a=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:new Date(a.row.original.createdAt).toLocaleDateString()})},{header:"Actions",id:"action",cell:a=>e.jsx(X,{row:a.row.original}),enableSorting:!1}],[]),A=a=>{m(o=>({...o,page:a}))},D=a=>{m(o=>({page:1,limit:a}))};return p?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 font-medium mb-2",children:"Error loading users"}),e.jsx("div",{className:"text-sm text-red-500 dark:text-red-300",children:p.message}),e.jsx(n,{className:"mt-4",onClick:()=>v(),variant:"solid",children:"Try Again"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Staffs"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(q,{placeholder:"Search users...",onChange:S,className:"max-w-md",prefix:e.jsx(K,{className:"text-lg text-gray-400"})}),e.jsx(n,{variant:"solid",icon:e.jsx(z,{}),className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white",onClick:()=>r("/app/user-new"),children:"Add Staff"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden",children:e.jsx(U,{ref:t,columns:w,data:N,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:j,pagingData:{total:g.total,pageIndex:g.page,pageSize:g.limit},onPaginationChange:A,onSelectChange:D})})]})};I("salesProductList",W);const Ze=()=>e.jsx(E,{className:"h-full",bodyClass:"h-full",children:e.jsx(te,{})});export{Ze as default};
