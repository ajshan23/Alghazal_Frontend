import{j as e,r as n,a8 as he,u as ue,v as pe,T as Y,b as U}from"./index-DGJe0h3_.js";import{a as be,C as fe}from"./Views-BFlyERhL.js";import{C as w}from"./Card-BM0eEatX.js";import{B as m}from"./Button-CQnyK8gC.js";import{L as je}from"./Logo-xgl6LQmA.js";import{aX as ye,aY as q,_ as ve,aZ as Ne,af as O,ay as ke,a0 as M,aa as we,a1 as z,a2 as Ce,a5 as B,a6 as Ee,a_ as H,ad as L,a9 as Se,a7 as Ie,Y as De}from"./index-DB0cxP-C.js";import{u as Pe}from"./useThemeClass-CWxsYH8M.js";import{g as A,a as Te,r as Ue,b as Ae,s as Re,d as Fe}from"./api-DZCEZPf2.js";import"./Alert-DQXwajGW.js";import{A as Me}from"./index-BoJTJILF.js";import{B as W}from"./Badge-Bbo5QMXa.js";import"./index-CIbY2fIk.js";import{T as J}from"./index-BGu1WFOe.js";import{D as Q}from"./Dialog-Cg-T3Ihd.js";import"./Drawer-CLVcPT2Q.js";import"./index-Bv5Pt-_w.js";import{F as K,a as Z}from"./FormItem-CS5k__-u.js";import"./useUniqueId-D1PCBCG9.js";import{I as _}from"./Input-k-NORbeb.js";import{U as ee}from"./Upload-BgdP_nuh.js";import"./index-1STGvrfH.js";import{t as N,N as k}from"./toast-DO-2lc6K.js";import"./index-nUD77ZMI.js";import"./ScrollBar-nZR6U59l.js";import"./Select-C04L81V4.js";import"./Tag-BPJKpn67.js";import{N as ae}from"./react-number-format.es-BJLXJgn2.js";import{u as He,f as G,c as qe,d as Oe}from"./index-BX8TTJWs.js";import"./context-DBc_qd6o.js";import"./StatusIcon-BdTPNP40.js";import"./CloseButton-CGoFVruc.js";import"./proxy-BoP70aqV.js";import"./floating-ui.react-DD89AqSX.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-C4_xw0Qz.js";import"./_getPrototype-0ulQvO4z.js";import"./index-Blf2GdN6.js";import"./index-CXaN8JhO.js";import"./toString-Dkf6_Dxj.js";import"./chainedFunction-BxZSneMW.js";import"./index-TU9pDyqH.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-DodG7NJv.js";const{Tr:R,Th:Qe,Td:D,THead:_e,TBody:Ve,TFoot:$e}=J,X=({label:d,value:x})=>e.jsxs(R,{children:[e.jsx(D,{className:"!border-t-0",colSpan:4}),e.jsx(D,{className:"font-semibold !border-t-0 text-right",children:d}),e.jsx(D,{className:"!py-3 !border-t-0",children:e.jsx(F,{amount:x})})]}),F=({amount:d=0})=>e.jsx(ae,{displayType:"text",value:(Math.round(d*100)/100).toFixed(2),suffix:" AED",thousandSeparator:!0}),P=Oe(),Ye=[P.accessor("sno",{header:"S.No",cell:d=>d.getValue()}),P.accessor("description",{header:"Description"}),P.accessor("uom",{header:"U.O.M"}),P.accessor("qty",{header:"Qty"}),P.accessor("unitPrice",{header:"Unit Price (AED)",cell:d=>e.jsx(F,{amount:d.getValue()})}),P.accessor("total",{header:"Total (AED)",cell:d=>e.jsx(F,{amount:d.getValue()})})],ze=({products:d=[],summary:x={}})=>{const h=He({data:d,columns:Ye,getCoreRowModel:qe()});return e.jsxs(J,{children:[e.jsx(_e,{children:h.getHeaderGroups().map(a=>e.jsx(R,{children:a.headers.map(r=>e.jsx(Qe,{colSpan:r.colSpan,children:G(r.column.columnDef.header,r.getContext())},r.id))},a.id))}),e.jsx(Ve,{children:h.getRowModel().rows.map(a=>e.jsx(R,{children:a.getVisibleCells().map(r=>e.jsx(D,{children:G(r.column.columnDef.cell,r.getContext())},r.id))},a.id))}),e.jsxs($e,{children:[e.jsx(X,{label:"Total (AED)",value:x.subTotal}),e.jsx(X,{label:"VAT 5% (AED)",value:x.vat}),e.jsxs(R,{children:[e.jsx(D,{className:"!border-t-0",colSpan:4}),e.jsx(D,{className:"font-semibold text-base text-right",children:"Net Amount (AED)"}),e.jsx(D,{className:"font-semibold text-base !py-3",children:e.jsx(F,{amount:x.netAmount})})]})]})]})},Be=({isOpen:d,onClose:x,onUpload:h,quotationId:a})=>{const[r,b]=n.useState([]),[j,i]=n.useState([]),y=n.useRef(null),u=l=>{if(l&&l.length>0){const o=Array.from(l).map(s=>({id:`${s.name}-${Date.now()}`,name:s.name,type:s.type,size:s.size,file:s}));return b(s=>[...s,...o]),i(s=>[...s,...o.map(()=>"")]),!0}return!0},C=(l,o)=>{i(s=>{const g=[...s];return g[l]=o,g})},E=l=>{b(o=>o.filter((s,g)=>g!==l)),i(o=>o.filter((s,g)=>g!==l))},I=()=>{const l=r.map(o=>o.file);h(l,j),b([]),i([]),x()},S=r.length>0&&j.every(l=>l==null?void 0:l.trim());return e.jsxs(Q,{isOpen:d,onClose:x,onRequestClose:x,width:800,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{children:"Upload Quotation Images"}),e.jsx(m,{shape:"circle",variant:"plain",icon:e.jsx(ye,{}),onClick:x})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(ee,{ref:y,beforeUpload:u,showList:!1,multiple:!0,accept:"image/*",children:e.jsx(m,{variant:"solid",icon:e.jsx(q,{}),type:"button",children:"Select Images"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Upload images for quotation (JPEG, PNG, GIF supported)"})]}),r.length>0&&e.jsxs("div",{className:"max-h-96 overflow-y-auto border rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:[r.length," image",r.length>1?"s":""," selected"]}),e.jsx(m,{size:"xs",variant:"plain",onClick:()=>{b([]),i([])},className:"text-red-500 hover:text-red-600",children:"Clear All"})]}),r.map((l,o)=>e.jsx("div",{className:"mb-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 last:mb-0",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-600 rounded-lg overflow-hidden flex-shrink-0",children:l.type.startsWith("image/")&&e.jsx("img",{src:URL.createObjectURL(l.file),alt:l.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(K,{layout:"vertical",size:"sm",children:e.jsx(Z,{label:"Title *",className:"mb-3",asterisk:!0,children:e.jsx(_,{value:j[o]||"",onChange:s=>C(o,s.target.value),placeholder:"Enter image title",required:!0,size:"sm"})})})}),e.jsx("div",{className:"flex flex-col gap-2 flex-shrink-0",children:e.jsx(m,{shape:"circle",variant:"plain",size:"sm",icon:e.jsx(ve,{}),onClick:()=>E(o),className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",title:"Remove image"})})]})},l.id))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx(m,{variant:"plain",onClick:x,children:"Cancel"}),e.jsxs(m,{variant:"solid",onClick:I,disabled:!S,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:["Upload ",r.length>0?`${r.length} Image${r.length>1?"s":""}`:"Images"]})]})]})},Le=({isOpen:d,onClose:x,onUpdate:h,onReplace:a,image:r})=>{const[b,j]=n.useState(""),[i,y]=n.useState(null),[u,C]=n.useState(!1);n.useEffect(()=>{r&&(j(r.title),y(null))},[r]);const E=s=>{if(s&&s.length>0){const g=s[0];return g.type.startsWith("image/")?(y(g),!0):(alert("Please select an image file"),!1)}return!1},I=async()=>{if(r){if(!b.trim()){alert("Please enter a title for the image");return}C(!0);try{await h(r._id,{title:b.trim()}),i&&await a(r._id,i),x()}catch(s){console.error("Error updating image:",s),alert("Failed to update image. Please try again.")}finally{C(!1)}}},S=()=>{y(null)},l=()=>{y(null),j((r==null?void 0:r.title)||""),x()};if(!r)return null;const o=i?URL.createObjectURL(i):r.imageUrl;return e.jsxs(Q,{isOpen:d,onClose:l,onRequestClose:l,width:800,height:600,style:{maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},contentClassName:"flex flex-col h-full",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200 dark:border-gray-600 flex-shrink-0",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Image"})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-6",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ne,{className:"text-lg text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Image Preview"})]}),e.jsx("div",{className:"aspect-square bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-600 overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:o,alt:b,className:"w-full h-full object-contain max-h-64"})}),i&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["New image selected: ",i.name]})})]})}),e.jsxs("div",{className:"lg:w-1/2",children:[e.jsx(K,{layout:"vertical",size:"sm",children:e.jsx(Z,{label:"Title *",className:"mb-6",asterisk:!0,children:e.jsx(_,{value:b,onChange:s=>j(s.target.value),placeholder:"Enter image title",required:!0})})}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(q,{className:"text-lg text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Replace Image"})]}),i?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 truncate",children:i.name}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[(i.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx(m,{size:"xs",variant:"plain",onClick:S,className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 ml-2",children:"Remove"})]}):e.jsxs("div",{className:"text-center p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-gray-400 dark:hover:border-gray-500 transition-colors",children:[e.jsx(ee,{beforeUpload:E,showList:!1,accept:"image/*",children:e.jsx(m,{variant:"twoTone",icon:e.jsx(q,{}),type:"button",size:"sm",className:"mb-2",children:"Select New Image"})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choose a new image file to replace the current one"})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-600 mt-auto flex-shrink-0",children:[e.jsx(m,{variant:"plain",onClick:l,disabled:u,children:"Cancel"}),e.jsx(m,{variant:"solid",onClick:I,loading:u,disabled:!b.trim(),className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:u?"Updating...":"Update Image"})]})]})},We=({isOpen:d,onClose:x,onSend:h,loading:a=!1})=>{const[r,b]=n.useState([]),[j,i]=n.useState(""),[y,u]=n.useState(""),C=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim()),E=()=>{const s=j.trim();if(s){if(!C(s)){u("Please enter a valid email address");return}if(r.includes(s)){u("This email is already added");return}b([...r,s]),i(""),u("")}},I=s=>{b(r.filter(g=>g!==s))},S=s=>{s.key==="Enter"&&(s.preventDefault(),E())},l=()=>{h(r),o()},o=()=>{b([]),i(""),u(""),x()};return e.jsx(Q,{isOpen:d,onClose:o,width:600,children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-lg",children:e.jsx(O,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Send Quotation Email"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add CC recipients (optional)"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"CC Email Addresses"}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:r.map((s,g)=>e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-full text-sm font-medium shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("span",{children:s}),e.jsx("button",{onClick:()=>I(s),className:"hover:bg-white/20 rounded-full p-0.5 transition-colors",type:"button",children:e.jsx(ke,{className:"text-sm"})})]},g))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{type:"email",placeholder:"Enter email address and press Enter",value:j,onChange:s=>{i(s.target.value),u("")},onKeyDown:S,className:"flex-1"}),e.jsx(m,{variant:"solid",onClick:E,className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:"Add"})]}),y&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:y}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Press Enter or click Add to add an email address"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Note:"})," The quotation will be sent to the client's email address. CC recipients will receive a copy of the email with the quotation PDF attached."]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(m,{variant:"plain",onClick:o,disabled:a,children:"Cancel"}),e.jsx(m,{variant:"solid",loading:a,onClick:l,icon:e.jsx(O,{}),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:a?"Sending...":r.length>0?`Send to ${r.length} CC`:"Send Email"})]})]})})},Ge=()=>{Pe();const{projectId:d}=he(),[x,h]=n.useState(!0),[a,r]=n.useState(null),[b,j]=n.useState(!1),i=ue(t=>t.theme.mode),[y,u]=n.useState(null),[C,E]=n.useState(!1),[I,S]=n.useState(!1),[l,o]=n.useState(!1),[s,g]=n.useState(!1),[re,V]=n.useState(null),se=pe(),[$,te]=n.useState(null);n.useEffect(()=>{(async()=>{try{if(h(!0),!d)throw new Error("Project ID is missing");const f=await A(d);console.log("from res",f.data),r(f.data)}catch(f){console.error("Error fetching quotation:",f),u("Failed to load quotation data")}finally{h(!1)}})();const c=JSON.parse(localStorage.getItem("user")||"{}");te(c.role)},[d]);const le=async t=>{var c,f;if(a){j(!0),u("");try{await Re(a._id,t),N.push(e.jsx(k,{title:"Success",type:"success",children:"Quotation email sent successfully"})),g(!1)}catch(v){u("Failed to send email"),N.push(e.jsx(k,{title:"Error",type:"danger",children:((f=(c=v.response)==null?void 0:c.data)==null?void 0:f.message)||v.message||"Failed to send email"}))}finally{j(!1)}}},de=async(t,c)=>{var f,v;if(a)try{h(!0),await Te({quotationId:a._id,images:t,titles:c});const p=await A(d);r(p.data),N.push(e.jsx(k,{title:"Success",type:"success",children:"Images uploaded successfully"}))}catch(p){console.error("Error uploading images:",p),N.push(e.jsx(k,{title:"Error",type:"danger",children:((v=(f=p.response)==null?void 0:f.data)==null?void 0:v.message)||p.message||"Failed to upload images"}))}finally{h(!1)}},oe=t=>{V(t),o(!0)},ie=async(t,c)=>{var f,v;if(a)try{h(!0),await Ae(a._id,t,c);const p=await A(d);r(p.data),N.push(e.jsx(k,{title:"Success",type:"success",children:"Image updated successfully"}))}catch(p){console.error("Error updating image:",p),N.push(e.jsx(k,{title:"Error",type:"danger",children:((v=(f=p.response)==null?void 0:f.data)==null?void 0:v.message)||p.message||"Failed to update image"}))}finally{h(!1)}},ne=async(t,c)=>{var f,v;if(a)try{h(!0),await Ue(a._id,t,c);const p=await A(d);r(p.data),N.push(e.jsx(k,{title:"Success",type:"success",children:"Image replaced successfully"}))}catch(p){console.error("Error replacing image:",p),N.push(e.jsx(k,{title:"Error",type:"danger",children:((v=(f=p.response)==null?void 0:f.data)==null?void 0:v.message)||p.message||"Failed to replace image"}))}finally{h(!1)}},ce=async()=>{if(a){E(!0),u("");try{await Fe({id:a._id,quotationNumber:a.quotationNumber,projectName:a.project.projectName,location:a.project.location}),N.push(e.jsx(k,{title:"Success",type:"success",children:"PDF downloaded successfully"}))}catch(t){u("Failed to download PDF"),N.push(e.jsx(k,{title:"Error",type:"danger",children:t.message||"Failed to download PDF"}))}finally{E(!1)}}},me=()=>{!a||!d||se(`${be}/quotation-edit/${d}/${a._id}`,{state:{estimationId:a.estimation}})};if(y)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs(w,{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"text-red-500 mb-4",children:[e.jsx(M,{className:"text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading Quotation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:y})]}),e.jsx(m,{className:"mt-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",onClick:()=>window.location.reload(),children:"Retry"})]})})});if(!a)return e.jsx(Y,{loading:x});const T=U().isBefore(U(a.validUntil)),xe=a.items.map((t,c)=>({id:t._id||`item-${c}`,sno:c+1,description:t.description,uom:t.uom,qty:t.quantity,unitPrice:t.unitPrice,total:t.totalPrice,details:{color:[],size:[]}})),ge={subTotal:a.subtotal,vat:a.vatAmount,netAmount:a.netAmount};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsxs(Y,{loading:x,children:[e.jsx(Be,{isOpen:I,onClose:()=>S(!1),onUpload:de,quotationId:a._id}),e.jsx(Le,{isOpen:l,onClose:()=>{o(!1),V(null)},onUpdate:ie,onReplace:ne,image:re}),e.jsx(We,{isOpen:s,onClose:()=>g(!1),onSend:le,loading:b}),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg",children:e.jsx(M,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Quotation Details"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View and manage quotation information"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8 mb-8",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(we,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Company Information"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx(je,{className:"mb-6",mode:i}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Project"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.project.projectName})]})]})})})]})]})}),e.jsx("div",{className:"xl:col-span-2",children:e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg",children:e.jsx(M,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["Quotation ",a.quotationNumber]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Quotation Details"})]})]}),e.jsx(W,{content:T?"Valid":"Expired",className:"px-3 py-1 text-xs font-bold",innerClass:`${T?"bg-emerald-500":"bg-red-500"} text-white shadow-lg`})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{className:"text-xl text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Date"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:U(a.date).format("dddd, DD MMMM, YYYY")})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-4 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"text-xl text-orange-600 dark:text-orange-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Valid Until"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:U(a.validUntil).format("dddd, DD MMMM, YYYY")})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-indigo-200 dark:border-indigo-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{size:40,shape:"circle",className:"border-2 border-white shadow-lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Prepared By"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a.preparedBy.firstName," ",a.preparedBy.lastName]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Net Amount"}),e.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:e.jsx(ae,{displayType:"text",value:a.netAmount,prefix:"AED ",thousandSeparator:!0,decimalScale:2})})]})]})})]})]})})]})})]}),a.images&&a.images.length>0&&e.jsxs(w,{className:"mb-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-blue-600 rounded-lg",children:e.jsx(H,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Quotation Images"})]}),e.jsx(m,{variant:"solid",icon:e.jsx(H,{}),onClick:()=>S(!0),className:"bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:"Add Images"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.images.map((t,c)=>e.jsxs("div",{className:"group bg-white dark:bg-gray-700 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-600 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsxs("div",{className:"aspect-video overflow-hidden relative",children:[e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),$!=="engineer"&&e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx(m,{size:"xs",variant:"solid",icon:e.jsx(L,{}),onClick:()=>oe(t),className:"bg-blue-500 hover:bg-blue-600 text-white shadow-lg",children:"Edit"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 text-center",children:t.title})})]},`image-${c}`))})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-gray-500 to-slate-600 rounded-lg",children:e.jsx(Se,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Items & Pricing"})]})}),e.jsx("div",{className:"p-6",children:e.jsx(ze,{products:xe,summary:ge,vatPercentage:a.vatPercentage})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.scopeOfWork&&a.scopeOfWork.length>0&&e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg",children:e.jsx(Ie,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Scope of Work"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("ul",{className:"space-y-3",children:a.scopeOfWork.map((t,c)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t})]},`scope-${c}`))})})]}),e.jsxs(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-lg",children:e.jsx(z,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Terms & Conditions"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("ol",{className:"space-y-3",children:a.termsAndConditions.map((t,c)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-gradient-to-r from-amber-500 to-orange-600 text-white text-xs font-bold rounded-full flex-shrink-0 mt-0.5",children:c+1}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t})]},`term-${c}`))})})]})]}),e.jsx(w,{className:"mb-8 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl shadow-xl border border-amber-200 dark:border-amber-800 overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl shadow-lg",children:e.jsx(B,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-1",children:"Quotation Validity"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["This quotation is ",T?"valid until":"expired since"," ",U(a.validUntil).format("DD MMMM, YYYY")]})]})]}),e.jsx(W,{content:T?"Valid":"Expired",className:"px-4 py-2 text-sm font-bold",innerClass:`${T?"bg-emerald-500":"bg-red-500"} text-white shadow-lg`})]})})}),e.jsx(w,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"flex flex-col lg:flex-row justify-center items-center gap-4",children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsx(m,{variant:"solid",loading:C,onClick:ce,icon:e.jsx(De,{}),className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 min-w-[160px]",children:C?"Generating...":"Download PDF"}),e.jsx(m,{variant:"solid",onClick:()=>g(!0),icon:e.jsx(O,{}),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 min-w-[160px]",children:"Send Email"}),e.jsx(m,{variant:"solid",icon:e.jsx(H,{}),onClick:()=>S(!0),className:"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 min-w-[160px]",children:"Add Images"}),$!=="engineer"&&e.jsx(m,{variant:"solid",icon:e.jsx(L,{}),onClick:me,className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 min-w-[160px]",children:"Edit Quotation"})]})})})})]})]})})},Qa=()=>e.jsx(fe,{className:"h-full",children:e.jsx(w,{className:"h-full",bodyClass:"h-full",children:e.jsx(Ge,{})})});export{Qa as default};
