import{a8 as Y,v as H,r as t,j as e,T as A,b as m}from"./index-DGJe0h3_.js";import{a0 as T,a$ as B,b0 as $,ad as F,aa as R,a1 as c,a2 as g,a3 as k,a9 as z,b1 as _,b2 as I}from"./index-DB0cxP-C.js";import{B as s}from"./Button-CQnyK8gC.js";import{u as q}from"./useThemeClass-CWxsYH8M.js";import"./Alert-DQXwajGW.js";import{A as U}from"./index-BoJTJILF.js";import"./Badge-Bbo5QMXa.js";import"./index-CIbY2fIk.js";import{C as d}from"./Card-BM0eEatX.js";import"./index-BGu1WFOe.js";import{D as V}from"./Dialog-Cg-T3Ihd.js";import"./Drawer-CLVcPT2Q.js";import"./index-Bv5Pt-_w.js";import"./FormItem-CS5k__-u.js";import"./useUniqueId-D1PCBCG9.js";import"./Input-k-NORbeb.js";import"./Upload-BgdP_nuh.js";import"./index-1STGvrfH.js";import{t as p,N as h}from"./toast-DO-2lc6K.js";import"./index-nUD77ZMI.js";import"./ScrollBar-nZR6U59l.js";import"./Select-C04L81V4.js";import"./Tag-BPJKpn67.js";import{f as G,d as J}from"./api-DDB3Q62m.js";import{N as b}from"./react-number-format.es-BJLXJgn2.js";import"./context-DBc_qd6o.js";import"./StatusIcon-BdTPNP40.js";import"./CloseButton-CGoFVruc.js";import"./proxy-BoP70aqV.js";import"./floating-ui.react-DD89AqSX.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-C4_xw0Qz.js";import"./Views-BFlyERhL.js";import"./_getPrototype-0ulQvO4z.js";import"./index-Blf2GdN6.js";import"./index-CXaN8JhO.js";import"./toString-Dkf6_Dxj.js";import"./chainedFunction-BxZSneMW.js";import"./index-TU9pDyqH.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-DodG7NJv.js";const Fe=()=>{q();const{id:l}=Y(),o=H(),[v,y]=t.useState(!0),[a,w]=t.useState(null),[f,D]=t.useState(null),[P,n]=t.useState(!1),[u,j]=t.useState(!1),[K,Q]=t.useState(!1),[O,C]=t.useState(null),N=async()=>{try{y(!0);const r=await G(l);w(r.data)}catch(r){console.error("Error fetching LPO details:",r),D(r.message||"Failed to load LPO details"),p.push(e.jsx(h,{title:"Error",type:"danger",children:r.message||"Failed to load LPO details"}))}finally{y(!1)}};t.useEffect(()=>{if(!l){o("/app/procurement");return}N();const r=JSON.parse(localStorage.getItem("user"));C(r.role)},[l]);const L=()=>{o(-1)},S=async()=>{try{j(!0),await J(l),p.push(e.jsx(h,{title:"Success",type:"success",children:"LPO deleted successfully"})),o("/app/procurement")}catch(r){p.push(e.jsx(h,{title:"Error",type:"danger",children:r.message||"Failed to delete LPO"}))}finally{j(!1),n(!1)}},M=()=>{o(`/app/lpo/edit/${a==null?void 0:a._id}/${l}`)},E=(r,x)=>{const i=document.createElement("a");i.href=r,i.download=x,document.body.appendChild(i),i.click(),document.body.removeChild(i)};return f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs(d,{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"text-red-500 mb-4",children:[e.jsx(T,{className:"text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading LPO"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:f})]}),e.jsx(s,{className:"mt-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",onClick:N,children:"Retry"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:[e.jsx(V,{isOpen:P,onClose:()=>n(!1),onRequestClose:()=>n(!1),width:400,children:e.jsxs("div",{className:"flex flex-col items-center pb-4 pt-6",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full mb-4",children:e.jsx(B,{className:"text-2xl text-red-600"})}),e.jsx("h5",{className:"mb-2 text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Confirm Deletion"}),e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:"Are you sure you want to delete this LPO? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{variant:"plain",onClick:()=>n(!1),className:"border border-gray-300 dark:border-gray-600",children:"Cancel"}),e.jsx(s,{variant:"solid",color:"red",loading:u,onClick:S,children:u?"Deleting...":"Delete"})]})]})}),e.jsx(A,{loading:v,children:a&&e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{shape:"circle",variant:"plain",icon:e.jsx($,{}),onClick:L,className:"bg-white dark:bg-gray-800 shadow-md rounded-xl p-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Purchase Order Details"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View and manage LPO information"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O!=="engineer"&&e.jsx(s,{variant:"solid",onClick:M,icon:e.jsx(F,{}),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:"Edit LPO"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"xl:col-span-1",children:[e.jsxs(d,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(R,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"LPO Information"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"LPO Number"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.lpoNumber})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"text-xl text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"LPO Date"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:m(a.lpoDate).format("dddd, DD MMMM, YYYY")})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"text-xl text-purple-600 dark:text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Supplier"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.supplier})]})]})})]})})]}),e.jsxs(d,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden mt-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg",children:e.jsx(k,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Created By"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(U,{size:50,shape:"circle",className:"border-2 border-white shadow-lg"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[a.createdBy.firstName," ",a.createdBy.lastName]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.createdBy.email})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 p-4 rounded-xl border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"text-xl text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Created On"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:m(a.createdAt).format("DD MMMM, YYYY h:mm A")})]})]})})]})]})]}),e.jsxs("div",{className:"xl:col-span-2",children:[e.jsxs(d,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden mb-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-gray-500 to-slate-600 rounded-lg",children:e.jsx(z,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Items"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.items.map((r,x)=>e.jsxs("tr",{className:x%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(b,{displayType:"text",value:r.unitPrice,prefix:"$",thousandSeparator:!0,decimalScale:2})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(b,{displayType:"text",value:r.totalPrice,prefix:"$",thousandSeparator:!0,decimalScale:2})})]},r._id))}),e.jsx("tfoot",{className:"bg-gray-100 dark:bg-gray-600",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-6 py-4 text-right font-semibold",children:"Total Amount:"}),e.jsx("td",{className:"px-6 py-4 font-bold",children:e.jsx(b,{displayType:"text",value:a.totalAmount,prefix:"$",thousandSeparator:!0,decimalScale:2})})]})})]})})})]}),e.jsxs(d,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-lg",children:e.jsx(c,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Attached Documents"})]})}),e.jsx("div",{className:"p-6",children:a.documents.length>0?e.jsx("div",{className:"space-y-4",children:a.documents.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 rounded-xl border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(c,{className:"text-xl text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 truncate max-w-xs",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(r.size/1024).toFixed(2)," KB"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(s,{size:"sm",icon:e.jsx(_,{}),onClick:()=>window.open(r.url,"_blank"),className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white font-semibold px-3 py-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"}),e.jsx(s,{size:"sm",icon:e.jsx(I,{}),onClick:()=>E(r.url,r.name),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-semibold px-3 py-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"})]})]},r._id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{className:"text-4xl text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No documents attached"})]})})]})]})]}),e.jsx(d,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-lg",children:e.jsx(g,{className:"text-2xl text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:m(a.createdAt).format("DD MMMM, YYYY")})]})]})})})})]})})]})};export{Fe as default};
