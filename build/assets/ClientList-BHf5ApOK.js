import{r as i,v as x,j as e}from"./index-BqYC2zCO.js";import{A as k}from"./AdaptableCard-DChiyDM1.js";import{A as C}from"./index-BhxlP8yV.js";import{D as A}from"./DataTable-CIH-lnfj.js";import{W as S,$ as D,V as K}from"./index-CErL3g3x.js";import{F as T}from"./index-BdZOEYLW.js";import{u as P}from"./useThemeClass-CB8d6Ww5.js";import{u as E}from"./useQuery-BEa8BXoD.js";import{d as F}from"./debounce-Mlq-s6K6.js";import{I as R}from"./Input-CF7OdvAt.js";import{f as z}from"./api-802CDzDT.js";import"./Alert-Praf8Fi9.js";import"./Badge-CrbEpOhk.js";import{B as h}from"./Button-BZH25-Aw.js";import"./index-Bm5J6gtn.js";import"./Card-DiA6JKLe.js";import"./index-o6PoulbO.js";import"./Dialog-C85wTnEL.js";import"./Drawer-3BaRt1RV.js";import"./index-BNWCw_o_.js";import"./FormItem-FeS_vrRF.js";import"./useUniqueId-BmsTzdR7.js";import"./Upload-B1V-WMlx.js";import"./index-fwAOcRNC.js";import"./toast-BNCR3rph.js";import"./index-BkSrbwb3.js";import"./ScrollBar-bvGQZvnP.js";import"./Select-3fyDv9Rf.js";import"./Tag-DOC98LxQ.js";import"./floating-ui.react-DBGHfBho.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-BLbmKy6n.js";import"./proxy-DBs-aCG0.js";import"./Views-B3egHxO-.js";import"./toString-sucKyfO-.js";import"./context-CKHslMnf.js";import"./StatusIcon-CrxJz663.js";import"./CloseButton-L6WjsDsk.js";import"./_getPrototype-_N1fRqzo.js";import"./index-Z1Egzvm9.js";import"./index-DtRKDKi1.js";import"./chainedFunction-BxZSneMW.js";import"./index-BnTamqJo.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-7CwaeXnJ.js";const H=({row:a})=>{P();const o=x(),n=()=>{o(`/app/client-form/${a._id}`)};return e.jsx("div",{className:"flex justify-start text-lg gap-1",children:e.jsx(h,{size:"sm",variant:"plain",icon:e.jsx(K,{}),onClick:n,className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300 transition-colors"})})},I=({row:a})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{icon:e.jsx(T,{}),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white",size:40}),e.jsx("span",{className:"ml-3 rtl:mr-3 font-semibold text-gray-800 dark:text-gray-200",children:a.clientName})]}),L=()=>{var p,g;const a=i.useRef(null),[o,n]=i.useState(""),[s,m]=i.useState({page:1,limit:10}),u=x(),{data:t,isLoading:f,error:c}=E({queryKey:["clients",s.page,s.limit,o],queryFn:()=>z({page:s.page,limit:s.limit,search:o})}),b=((p=t==null?void 0:t.data)==null?void 0:p.clients)||[],d=((g=t==null?void 0:t.data)==null?void 0:g.pagination)||{total:0,page:1,limit:10},y=i.useMemo(()=>F(r=>{n(r),m(l=>({...l,page:1}))},500),[]),j=r=>{y(r.target.value)},N=i.useMemo(()=>[{header:"Client Name",accessorKey:"clientName",cell:r=>e.jsx(I,{row:r.row.original})},{header:"Address",accessorKey:"clientAddress",cell:r=>e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.row.original.clientAddress})},{header:"Mobile",accessorKey:"mobileNumber",cell:r=>e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.row.original.mobileNumber})},{header:"TRN",accessorKey:"trnNumber",cell:r=>e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.row.original.trnNumber})},{header:"Created At",accessorKey:"createdAt",cell:r=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:new Date(r.row.original.createdAt).toLocaleDateString()})},{header:"Actions",id:"action",cell:r=>e.jsx(H,{row:r.row.original})}],[]),v=r=>{m(l=>({...l,page:r}))},w=r=>{m(l=>({page:1,limit:r}))};return c?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 font-medium mb-2",children:"Error loading clients"}),e.jsx("div",{className:"text-sm text-red-500 dark:text-red-300",children:c.message})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Clients"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(R,{placeholder:"Search clients...",onChange:j,className:"max-w-md",prefix:e.jsx(S,{className:"text-lg text-gray-400"})}),e.jsx(h,{variant:"solid",icon:e.jsx(D,{}),className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white",onClick:()=>u("/app/client-new"),children:"Add Client"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden",children:e.jsx(A,{ref:a,columns:N,data:b,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:f,pagingData:{total:d.total,pageIndex:d.page,pageSize:d.limit},onPaginationChange:v,onSelectChange:w})})]})},Pe=()=>e.jsx(k,{className:"h-full",bodyClass:"h-full",children:e.jsx(L,{})});export{Pe as default};
