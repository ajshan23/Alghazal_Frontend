import{a8 as E,v as H,r as t,j as e,T as Y,b as g}from"./index-BqYC2zCO.js";import{a0 as B,a$ as T,b0 as F,ad as R,aa as z,a1 as c,a2 as p,a3 as k,a6 as I,a9 as _,b1 as $,b2 as q}from"./index-CErL3g3x.js";import{B as d}from"./Button-BZH25-Aw.js";import{u as U}from"./useThemeClass-CB8d6Ww5.js";import"./Alert-Praf8Fi9.js";import{A as V}from"./index-BhxlP8yV.js";import"./Badge-CrbEpOhk.js";import"./index-Bm5J6gtn.js";import{C as l}from"./Card-DiA6JKLe.js";import"./index-o6PoulbO.js";import{D as G}from"./Dialog-C85wTnEL.js";import"./Drawer-3BaRt1RV.js";import"./index-BNWCw_o_.js";import"./FormItem-FeS_vrRF.js";import"./useUniqueId-BmsTzdR7.js";import"./Input-CF7OdvAt.js";import"./Upload-B1V-WMlx.js";import"./index-fwAOcRNC.js";import{t as h,N as b}from"./toast-BNCR3rph.js";import"./index-BkSrbwb3.js";import"./ScrollBar-bvGQZvnP.js";import"./Select-3fyDv9Rf.js";import"./Tag-DOC98LxQ.js";import{f as J,d as K}from"./api-W0QsVYrJ.js";import{N as Q}from"./react-number-format.es-BGUL9v2_.js";import{D as W}from"./Dirham-thumb-GsAmv-hi.js";import"./context-CKHslMnf.js";import"./StatusIcon-CrxJz663.js";import"./CloseButton-L6WjsDsk.js";import"./proxy-DBs-aCG0.js";import"./floating-ui.react-DBGHfBho.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-BLbmKy6n.js";import"./Views-B3egHxO-.js";import"./_getPrototype-_N1fRqzo.js";import"./index-Z1Egzvm9.js";import"./index-DtRKDKi1.js";import"./toString-sucKyfO-.js";import"./chainedFunction-BxZSneMW.js";import"./index-BnTamqJo.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-7CwaeXnJ.js";const x=({value:s})=>e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("img",{src:W,alt:"Dirham",className:"w-3.5 h-3.5 inline-block"}),e.jsx(Q,{displayType:"text",value:s,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0})]}),$e=()=>{U();const{id:s}=E(),o=H(),[v,y]=t.useState(!0),[a,w]=t.useState(null),[j,D]=t.useState(null),[C,n]=t.useState(!1),[f,u]=t.useState(!1),[X,Z]=t.useState(!1),[P,O]=t.useState(null),N=async()=>{try{y(!0);const r=await J(s);w(r.data)}catch(r){console.error("Error fetching LPO details:",r),D(r.message||"Failed to load LPO details"),h.push(e.jsx(b,{title:"Error",type:"danger",children:r.message||"Failed to load LPO details"}))}finally{y(!1)}};t.useEffect(()=>{if(!s){o("/app/procurement");return}N();const r=JSON.parse(localStorage.getItem("user"));O(r.role)},[s]);const L=()=>{o(-1)},S=async()=>{try{u(!0),await K(s),h.push(e.jsx(b,{title:"Success",type:"success",children:"LPO deleted successfully"})),o("/app/procurement")}catch(r){h.push(e.jsx(b,{title:"Error",type:"danger",children:r.message||"Failed to delete LPO"}))}finally{u(!1),n(!1)}},M=()=>{o(`/app/lpo/edit/${a==null?void 0:a._id}/${s}`)},A=(r,m)=>{const i=document.createElement("a");i.href=r,i.download=m,document.body.appendChild(i),i.click(),document.body.removeChild(i)};return j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs(l,{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"text-red-500 mb-4",children:[e.jsx(B,{className:"text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading LPO"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:j})]}),e.jsx(d,{className:"mt-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",onClick:N,children:"Retry"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-850 dark:to-gray-900",children:[e.jsx(G,{isOpen:C,onClose:()=>n(!1),onRequestClose:()=>n(!1),width:400,children:e.jsxs("div",{className:"flex flex-col items-center pb-4 pt-6",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full mb-4",children:e.jsx(T,{className:"text-2xl text-red-600"})}),e.jsx("h5",{className:"mb-2 text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Confirm Deletion"}),e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:"Are you sure you want to delete this LPO? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"plain",onClick:()=>n(!1),className:"border border-gray-300 dark:border-gray-600",children:"Cancel"}),e.jsx(d,{variant:"solid",color:"red",loading:f,onClick:S,children:f?"Deleting...":"Delete"})]})]})}),e.jsx(Y,{loading:v,children:a&&e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{shape:"circle",variant:"plain",icon:e.jsx(F,{}),onClick:L,className:"bg-white dark:bg-gray-800 shadow-md rounded-xl p-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Purchase Order Details"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View and manage LPO information"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P!=="engineer"&&e.jsx(d,{variant:"solid",onClick:M,icon:e.jsx(R,{}),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:"Edit LPO"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"xl:col-span-1",children:[e.jsxs(l,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(z,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"LPO Information"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{className:"text-xl text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"LPO Number"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.lpoNumber})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"text-xl text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"LPO Date"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:g(a.lpoDate).format("dddd, DD MMMM, YYYY")})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"text-xl text-purple-600 dark:text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Supplier"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.supplier})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-4 rounded-xl border border-amber-200 dark:border-amber-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"text-xl text-amber-600 dark:text-amber-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Total Amount"}),e.jsx("p",{className:"text-lg font-bold text-amber-600 dark:text-amber-400",children:e.jsx(x,{value:a.totalAmount})})]})]})})]})})]}),e.jsxs(l,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden mt-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg",children:e.jsx(k,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Created By"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(V,{size:50,shape:"circle",className:"border-2 border-white shadow-lg"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[a.createdBy.firstName," ",a.createdBy.lastName]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.createdBy.email})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 p-4 rounded-xl border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"text-xl text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Created On"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:g(a.createdAt).format("DD MMMM, YYYY h:mm A")})]})]})})]})]})]}),e.jsxs("div",{className:"xl:col-span-2",children:[e.jsxs(l,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden mb-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-gray-500 to-slate-600 rounded-lg",children:e.jsx(_,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Items"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.items.map((r,m)=>e.jsxs("tr",{className:m%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(x,{value:r.unitPrice})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(x,{value:r.totalPrice})})]},r._id))}),e.jsx("tfoot",{className:"bg-gray-100 dark:bg-gray-600",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-6 py-4 text-right font-semibold",children:"Total Amount:"}),e.jsx("td",{className:"px-6 py-4 font-bold",children:e.jsx(x,{value:a.totalAmount})})]})})]})})})]}),e.jsxs(l,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-gray-800 dark:to-gray-750 p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-lg",children:e.jsx(c,{className:"text-2xl text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Attached Documents"})]})}),e.jsx("div",{className:"p-6",children:a.documents.length>0?e.jsx("div",{className:"space-y-4",children:a.documents.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 rounded-xl border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(c,{className:"text-xl text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 truncate max-w-xs",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(r.size/1024).toFixed(2)," KB"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{size:"sm",icon:e.jsx($,{}),onClick:()=>window.open(r.url,"_blank"),className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white font-semibold px-3 py-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"}),e.jsx(d,{size:"sm",icon:e.jsx(q,{}),onClick:()=>A(r.url,r.name),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-semibold px-3 py-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"})]})]},r._id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{className:"text-4xl text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No documents attached"})]})})]})]})]}),e.jsx(l,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-lg",children:e.jsx(p,{className:"text-2xl text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:g(a.createdAt).format("DD MMMM, YYYY")})]})]})})})})]})})]})};export{$e as default};
