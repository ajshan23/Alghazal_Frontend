import{r as i,v as x,j as e}from"./index-DGJe0h3_.js";import{A as k}from"./AdaptableCard-BnEcGD7j.js";import{A as C}from"./index-BoJTJILF.js";import{D as A}from"./DataTable-CLMBeNRf.js";import{W as S,$ as D,V as K}from"./index-DB0cxP-C.js";import{F as T}from"./index-C8abeZB5.js";import{u as P}from"./useThemeClass-CWxsYH8M.js";import{u as E}from"./useQuery-D-uGNTqp.js";import{d as F}from"./debounce-BytNY59r.js";import{I as R}from"./Input-k-NORbeb.js";import{f as z}from"./api-y6wfSwYb.js";import"./Alert-DQXwajGW.js";import"./Badge-Bbo5QMXa.js";import{B as h}from"./Button-CQnyK8gC.js";import"./index-CIbY2fIk.js";import"./Card-BM0eEatX.js";import"./index-BGu1WFOe.js";import"./Dialog-Cg-T3Ihd.js";import"./Drawer-CLVcPT2Q.js";import"./index-Bv5Pt-_w.js";import"./FormItem-CS5k__-u.js";import"./useUniqueId-D1PCBCG9.js";import"./Upload-BgdP_nuh.js";import"./index-1STGvrfH.js";import"./toast-DO-2lc6K.js";import"./index-nUD77ZMI.js";import"./ScrollBar-nZR6U59l.js";import"./Select-C04L81V4.js";import"./Tag-BPJKpn67.js";import"./floating-ui.react-DD89AqSX.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-C4_xw0Qz.js";import"./proxy-BoP70aqV.js";import"./index-BX8TTJWs.js";import"./Views-BFlyERhL.js";import"./toString-Dkf6_Dxj.js";import"./context-DBc_qd6o.js";import"./StatusIcon-BdTPNP40.js";import"./CloseButton-CGoFVruc.js";import"./_getPrototype-0ulQvO4z.js";import"./index-Blf2GdN6.js";import"./index-CXaN8JhO.js";import"./chainedFunction-BxZSneMW.js";import"./index-TU9pDyqH.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-DodG7NJv.js";const H=({row:a})=>{P();const o=x(),n=()=>{o(`/app/client-form/${a._id}`)};return e.jsx("div",{className:"flex justify-start text-lg gap-1",children:e.jsx(h,{size:"sm",variant:"plain",icon:e.jsx(K,{}),onClick:n,className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300 transition-colors"})})},I=({row:a})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{icon:e.jsx(T,{}),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white",size:40}),e.jsx("span",{className:"ml-3 rtl:mr-3 font-semibold text-gray-800 dark:text-gray-200",children:a.clientName})]}),L=()=>{var p,g;const a=i.useRef(null),[o,n]=i.useState(""),[s,m]=i.useState({page:1,limit:10}),u=x(),{data:t,isLoading:f,error:c}=E({queryKey:["clients",s.page,s.limit,o],queryFn:()=>z({page:s.page,limit:s.limit,search:o})}),b=((p=t==null?void 0:t.data)==null?void 0:p.clients)||[],d=((g=t==null?void 0:t.data)==null?void 0:g.pagination)||{total:0,page:1,limit:10},y=i.useMemo(()=>F(r=>{n(r),m(l=>({...l,page:1}))},500),[]),j=r=>{y(r.target.value)},N=i.useMemo(()=>[{header:"Client Name",accessorKey:"clientName",cell:r=>e.jsx(I,{row:r.row.original})},{header:"Address",accessorKey:"clientAddress",cell:r=>e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.row.original.clientAddress})},{header:"Mobile",accessorKey:"mobileNumber",cell:r=>e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.row.original.mobileNumber})},{header:"TRN",accessorKey:"trnNumber",cell:r=>e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.row.original.trnNumber})},{header:"Created At",accessorKey:"createdAt",cell:r=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:new Date(r.row.original.createdAt).toLocaleDateString()})},{header:"Actions",id:"action",cell:r=>e.jsx(H,{row:r.row.original})}],[]),v=r=>{m(l=>({...l,page:r}))},w=r=>{m(l=>({page:1,limit:r}))};return c?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 font-medium mb-2",children:"Error loading clients"}),e.jsx("div",{className:"text-sm text-red-500 dark:text-red-300",children:c.message})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Clients"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(R,{placeholder:"Search clients...",onChange:j,className:"max-w-md",prefix:e.jsx(S,{className:"text-lg text-gray-400"})}),e.jsx(h,{variant:"solid",icon:e.jsx(D,{}),className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white",onClick:()=>u("/app/client-new"),children:"Add Client"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden",children:e.jsx(A,{ref:a,columns:N,data:b,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:f,pagingData:{total:d.total,pageIndex:d.page,pageSize:d.limit},onPaginationChange:v,onSelectChange:w})})]})},Ee=()=>e.jsx(k,{className:"h-full",bodyClass:"h-full",children:e.jsx(L,{})});export{Ee as default};
