import{$ as N,a0 as C,a1 as R,j as e,r as d,a as k,T as S,a2 as M}from"./index-BqYC2zCO.js";import{a as Y}from"./ProjectService-DXvOPZdQ.js";import{C as j}from"./Card-DiA6JKLe.js";import{O as g,P as A}from"./index-CErL3g3x.js";import{m as E}from"./proxy-DBs-aCG0.js";import"./Alert-Praf8Fi9.js";import"./index-BhxlP8yV.js";import"./Badge-CrbEpOhk.js";import"./Button-BZH25-Aw.js";import"./index-Bm5J6gtn.js";import"./index-o6PoulbO.js";import"./Dialog-C85wTnEL.js";import"./Drawer-3BaRt1RV.js";import"./index-BNWCw_o_.js";import"./FormItem-FeS_vrRF.js";import"./useUniqueId-BmsTzdR7.js";import"./Input-CF7OdvAt.js";import{S as h}from"./Upload-B1V-WMlx.js";import"./index-fwAOcRNC.js";import"./toast-BNCR3rph.js";import"./index-BkSrbwb3.js";import"./ScrollBar-bvGQZvnP.js";import"./Select-3fyDv9Rf.js";import"./Tag-DOC98LxQ.js";import{g as J,a as P}from"./api-CJl07x1A.js";import"./StatusIcon-CrxJz663.js";import"./CloseButton-L6WjsDsk.js";import"./floating-ui.react-DBGHfBho.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-BLbmKy6n.js";import"./context-CKHslMnf.js";import"./Views-B3egHxO-.js";import"./_getPrototype-_N1fRqzo.js";import"./index-Z1Egzvm9.js";import"./index-DtRKDKi1.js";import"./toString-sucKyfO-.js";import"./chainedFunction-BxZSneMW.js";import"./index-BnTamqJo.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-7CwaeXnJ.js";const v="projectDashboard",x=N(v+"/getProjectDashboardData",async()=>(await Y()).data),T={loading:!0,dashboardData:{}},_=C({name:`${v}/state`,initialState:T,reducers:{},extraReducers:a=>{a.addCase(x.fulfilled,(o,l)=>{o.dashboardData=l.payload,o.loading=!1}).addCase(x.pending,o=>{o.loading=!0})}}),$=_.reducer,L=R({data:$}),I=({userName:a,taskCount:o})=>e.jsx("div",{children:e.jsxs("h4",{className:"mb-1",children:["Hello, ",a,"!"]})}),O=({range:a,onDownload:o})=>{const l=a==="monthly"?"Monthly Report":"Yearly Report",n=a==="monthly"?"bg-blue-50":"bg-yellow-50",m=a==="monthly"?"bg-blue-600 hover:bg-blue-700":"bg-yellow-500 hover:bg-yellow-600";return e.jsx(E.div,{className:"mb-4 transition-all duration-500 ease-in-out",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsx(j,{className:`${n} transition-colors duration-300`,bordered:!0,children:e.jsxs("div",{className:"grid gap-x-4 grid-cols-12",children:[e.jsxs("div",{className:"col-span-12 sm:col-span-6 flex items-center gap-2",children:[e.jsx(g,{className:"text-2xl text-gray-700"}),e.jsx("h6",{className:"font-bold capitalize text-gray-800",children:l})]}),e.jsx("div",{className:"col-span-12 sm:col-span-6 flex items-center justify-end",children:e.jsxs("button",{className:`text-white px-4 py-2 rounded ${m} transition duration-300 flex items-center gap-2`,onClick:()=>o(a),children:[e.jsx(g,{className:"text-lg"}),"Download"]})})]})})},a)},y=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],F=()=>{const a=new Date().getFullYear();return Array.from({length:10},(o,l)=>({value:a-l,label:(a-l).toString()}))},H=({data:a=[]})=>{const[o,l]=d.useState(["monthly"]),[n,m]=d.useState(new Date().getMonth()+1),[i,b]=d.useState(new Date().getFullYear()),f=t=>{console.log("Selected month label:",t)},D=()=>{m(new Date().getMonth()+1),b(new Date().getFullYear())},w=async t=>{try{let r;t==="monthly"?r=await J({year:i,month:n}):r=await P({year:i});const u=new Blob([r.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(u),s=document.createElement("a");s.href=c,s.download=t==="monthly"?`monthly_report_${i}_${n}.xlsx`:`yearly_report_${i}.xlsx`,document.body.appendChild(s),s.click(),document.body.removeChild(s),console.log("Report downloaded successfully")}catch(r){console.error("Download failed:",r)}};return e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[e.jsxs("h4",{children:[o[0]==="monthly"?"Monthly":"Yearly"," Reports"]}),e.jsxs(h,{value:o,size:"sm",onChange:t=>l(t),children:[e.jsx(h.Item,{value:"monthly",children:"Monthly"}),e.jsx(h.Item,{value:"yearly",children:"Yearly"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center w-full md:w-auto",children:[o[0]==="monthly"&&e.jsx("select",{className:"p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700",value:n,onChange:t=>{var c;const r=Number(t.target.value),u=((c=y.find(s=>s.value===r))==null?void 0:c.label)||"";m(r),f(u)},children:y.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("select",{className:"p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700",value:i,onChange:t=>b(Number(t.target.value)),children:F().map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("button",{onClick:D,className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",title:"Reset filters",children:e.jsx(A,{size:18})})]})]}),e.jsx(O,{range:o[0],onDownload:w})]})};M("projectDashboard",L);let p=JSON.parse(localStorage.getItem("user")||"{}");console.log(p,"user");const z={dashboardData:{userName:(p==null?void 0:p.name)||"user",taskCount:12,projectsData:[{id:"1",name:"Website Redesign",category:"Web Development",desc:"Complete redesign of company website",attachmentCount:12,totalTask:45,completedTask:28,progression:62,dayleft:14,status:"in progress",member:[{id:"1",name:"John Doe",email:"john@example.com",img:"/img/avatars/thumb-1.jpg"},{id:"2",name:"Jane Smith",email:"jane@example.com",img:"/img/avatars/thumb-2.jpg"}]},{id:"2",name:"Mobile App",category:"Mobile Development",desc:"Development of company mobile application",attachmentCount:8,totalTask:32,completedTask:12,progression:38,dayleft:21,status:"in progress",member:[{id:"3",name:"Robert Johnson",email:"robert@example.com",img:"/img/avatars/thumb-3.jpg"},{id:"4",name:"Emily Davis",email:"emily@example.com",img:"/img/avatars/thumb-4.jpg"}]}]}},Ae=()=>{k();const a=z.dashboardData,o=!1;return d.useEffect(()=>{},[]),e.jsx("div",{className:"flex flex-col gap-4 h-full",children:e.jsxs(S,{loading:o,children:[e.jsx(I,{userName:a==null?void 0:a.userName,taskCount:a==null?void 0:a.taskCount}),e.jsx("div",{className:"flex flex-col xl:flex-row gap-4",children:e.jsx("div",{className:"flex flex-col gap-4 flex-auto",children:e.jsx(H,{data:a==null?void 0:a.projectsData})})})]})})};export{Ae as default};
